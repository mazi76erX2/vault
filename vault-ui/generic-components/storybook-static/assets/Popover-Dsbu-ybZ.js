import{_ as m}from"./emotion-use-insertion-effect-with-fallbacks.browser.esm-DixkWG2H.js";import{g as wo,f as Eo,_ as C,e as Q,s as so}from"./styled-C2XKt8wj.js";import{r as a}from"./index-CBqU2yxZ.js";import{a as z}from"./jsx-runtime-BpOMd3UL.js";import{u as bo,c as To}from"./DefaultPropsProvider-Gu-CRdBj.js";import{G as Ro}from"./Grow-BObsAk6g.js";import{a as So}from"./useIsFocusVisible-C9MsNx9r.js";import{o as Z}from"./ownerDocument-DW-IO8s5.js";import{o as oo,d as Oo}from"./ownerWindow-BN2rbQ_G.js";import{u as to}from"./Portal-DBeQERGv.js";import{i as Co}from"./isHostComponent-DVu5iVWx.js";import{M as zo}from"./Modal-PVjgijRQ.js";import{P as _o}from"./Paper-D64tQ3vb.js";function Mo(e){return wo("MuiPopover",e)}Eo("MuiPopover",["root","paper"]);const ko=["onEntering"],Lo=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Wo=["slotProps"];function eo(e,o){let s=0;return typeof o=="number"?s=o:o==="center"?s=e.height/2:o==="bottom"&&(s=e.height),s}function ro(e,o){let s=0;return typeof o=="number"?s=o:o==="center"?s=e.width/2:o==="right"&&(s=e.width),s}function no(e){return[e.horizontal,e.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function _(e){return typeof e=="function"?e():e}const Do=e=>{const{classes:o}=e;return To({root:["root"],paper:["paper"]},Mo,o)},Ho=so(zo,{name:"MuiPopover",slot:"Root",overridesResolver:(e,o)=>o.root})({}),$o=so(_o,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ko=a.forwardRef(function(o,s){var M,k,L;const y=bo({props:o,name:"MuiPopover"}),{action:io,anchorEl:p,anchorOrigin:P={vertical:"top",horizontal:"left"},anchorPosition:W,anchorReference:v="anchorEl",children:lo,className:ao,container:po,elevation:D=8,marginThreshold:i=16,open:f,PaperProps:co={},slots:x,slotProps:w,transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:E=Ro,transitionDuration:b="auto",TransitionProps:{onEntering:H}={},disableScrollLock:T=!1}=y,$=C(y.TransitionProps,ko),fo=C(y,Lo),u=(M=w==null?void 0:w.paper)!=null?M:co,R=a.useRef(),uo=So(R,u.ref),S=m({},y,{anchorOrigin:P,anchorReference:v,elevation:D,marginThreshold:i,externalPaperSlotProps:u,transformOrigin:g,TransitionComponent:E,transitionDuration:b,TransitionProps:$}),N=Do(S),A=a.useCallback(()=>{if(v==="anchorPosition")return W;const t=_(p),n=(t&&t.nodeType===1?t:Z(R.current).body).getBoundingClientRect();return{top:n.top+eo(n,P.vertical),left:n.left+ro(n,P.horizontal)}},[p,P.horizontal,P.vertical,W,v]),U=a.useCallback(t=>({vertical:eo(t,g.vertical),horizontal:ro(t,g.horizontal)}),[g.horizontal,g.vertical]),j=a.useCallback(t=>{const r={width:t.offsetWidth,height:t.offsetHeight},n=U(r);if(v==="none")return{top:null,left:null,transformOrigin:no(n)};const V=A();let d=V.top-n.vertical,h=V.left-n.horizontal;const X=d+r.height,Y=h+r.width,q=oo(_(p)),J=q.innerHeight-i,K=q.innerWidth-i;if(i!==null&&d<i){const l=d-i;d-=l,n.vertical+=l}else if(i!==null&&X>J){const l=X-J;d-=l,n.vertical+=l}if(i!==null&&h<i){const l=h-i;h-=l,n.horizontal+=l}else if(Y>K){const l=Y-K;h-=l,n.horizontal+=l}return{top:`${Math.round(d)}px`,left:`${Math.round(h)}px`,transformOrigin:no(n)}},[p,v,A,U,i]),[ho,F]=a.useState(f),c=a.useCallback(()=>{const t=R.current;if(!t)return;const r=j(t);r.top!==null&&(t.style.top=r.top),r.left!==null&&(t.style.left=r.left),t.style.transformOrigin=r.transformOrigin,F(!0)},[j]);a.useEffect(()=>(T&&window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[p,T,c]);const mo=(t,r)=>{H&&H(t,r),c()},Po=()=>{F(!1)};a.useEffect(()=>{f&&c()}),a.useImperativeHandle(io,()=>f?{updatePosition:()=>{c()}}:null,[f,c]),a.useEffect(()=>{if(!f)return;const t=Oo(()=>{c()}),r=oo(p);return r.addEventListener("resize",t),()=>{t.clear(),r.removeEventListener("resize",t)}},[p,f,c]);let G=b;b==="auto"&&!E.muiSupportAuto&&(G=void 0);const vo=po||(p?Z(_(p)).body:void 0),O=(k=x==null?void 0:x.root)!=null?k:Ho,I=(L=x==null?void 0:x.paper)!=null?L:$o,go=to({elementType:I,externalSlotProps:m({},u,{style:ho?u.style:m({},u.style,{opacity:0})}),additionalProps:{elevation:D,ref:uo},ownerState:S,className:Q(N.paper,u==null?void 0:u.className)}),B=to({elementType:O,externalSlotProps:(w==null?void 0:w.root)||{},externalForwardedProps:fo,additionalProps:{ref:s,slotProps:{backdrop:{invisible:!0}},container:vo,open:f},ownerState:S,className:Q(N.root,ao)}),{slotProps:yo}=B,xo=C(B,Wo);return z(O,m({},xo,!Co(O)&&{slotProps:yo,disableScrollLock:T},{children:z(E,m({appear:!0,in:f,onEntering:mo,onExited:Po,timeout:G},$,{children:z(I,m({},go,{children:lo}))}))}))});export{Ko as P,$o as a};
