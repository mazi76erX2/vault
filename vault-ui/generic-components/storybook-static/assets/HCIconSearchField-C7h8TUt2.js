import{a as z,j as ct,F as As}from"./jsx-runtime-BpOMd3UL.js";import{r as $t,R as qt}from"./index-CBqU2yxZ.js";import{d as Zn}from"./Close-ByzkXLC5.js";import{o as Ms,s as zs}from"./styled-C2XKt8wj.js";import{r as Bs,a as Ws}from"./jsx-runtime_commonjs-proxy-BbWOKvFy.js";import{a as Kr,I as Rs,F as Ks,L as Us}from"./HCIconsPicker-BdvECjMb.js";import{T as Gn}from"./Tooltip-DsCYTBR5.js";var Tn={},Js=Ms;Object.defineProperty(Tn,"__esModule",{value:!0});var Ur=Tn.default=void 0,Vs=Js(Bs()),js=Ws;Ur=Tn.default=(0,Vs.default)((0,js.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");const Hs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%20width='70'%20height='90'%20version='1.2'%3e%3cg%20class='layer'%3e%3cg%20id='svg_7'%3e%3cpath%20d='m25.39,88.2l-23.8,0l0,-43.5l23.7,0l0.1,43.5zm0,0'%20fill='%23484848'%20id='svg_1'%20stroke='%23484848'%20stroke-miterlimit='10'%20stroke-width='3'/%3e%3cpath%20d='m49.19,88.2l-26.8,0l0,-86.5l26.8,0l0,86.5zm0,0'%20fill='%23f18920'%20id='svg_2'%20stroke='%23f18920'%20stroke-miterlimit='10'%20stroke-width='3'/%3e%3cpath%20d='m67.19,88.2l-25,0l0,-54l25,0l0,54zm0,0'%20fill='%23fff'%20id='svg_3'%20stroke='%23f18920'%20stroke-miterlimit='10'%20stroke-width='3'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",$s="data:image/svg+xml,%3csvg%20viewBox='0%200%2032%2032'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m9%204c-1.654%200-3%201.346-3%203%200%201.3016094.8387486%202.4021391%202%202.8164062v1.4882818%2011.902343%203.816407c0%20.54.4365625.976562.9765625.976562h.046875c.54%200%20.9765625-.436563.9765625-.976562v-4.794922c.334707-.38876%201.138423-1.181641%203.445312-1.181641%201.224001%200%202.22511.426906%203.28711.878906%201.037.442%202.109469.898438%203.355469.898438%202.359%200%203.961484-1.239531%204.646484-1.769531l.152344-.115235c.551-.399%201.113281-.943453%201.113281-1.939453v-8.324219c0-.9079998-.778172-1.675781-1.701172-1.675781-.495%200-.858422.2865937-1.357422.6835938-.662.5240002-1.660515%201.3164062-2.853515%201.3164062-.815%200-1.610203-.380266-2.533203-.822266-1.151001-.5519996-2.456329-1.177734-4.111329-1.177734-1.135102%200-2.021672.1883393-2.730468.4570312.77618-.5428488%201.287109-1.440251%201.287109-2.4570312%200-1.654-1.346-3-3-3zm0%202c.552%200%201%20.449%201%201s-.448%201-1%201-1-.449-1-1%20.448-1%201-1zm4.443359%205c1.202%200%202.195047.476469%203.248047.980469%201.045.502%202.126485%201.019531%203.396485%201.019531%201.755%200%203.070156-.945516%203.910156-1.603516v7.669922c-.001.004-.045063.07886-.289063.25586l-.199218.152343c-.567.438-1.746875%201.34961-3.421875%201.34961-.838%200-1.641266-.341282-2.572266-.738281-1.143-.488-2.439266-1.041016-4.072266-1.041016-1.552%200-2.657359.313078-3.443359.705078v-7.388672c.345-.456%201.132359-1.361328%203.443359-1.361328z'/%3e%3c/svg%3e",qs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20class='icon%20icon-tabler%20icon-tabler-letter-l'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20stroke-width='2'%20stroke='currentColor'%20fill='none'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20stroke='none'%20d='M0%200h24v24H0z'%20fill='none'/%3e%3cpath%20d='M7%204v16h10'%20/%3e%3c/svg%3e";function Qs(n){return{}}const Sn={},xo={},Xs={},gt={},ft={},Yn={},je={},Jr={},er={},_t={},pt={},ke={},Vr={},jr={},Zs={},Gs={},Ys={},ei={},ti={},ni={},ri={},ln={},si={},ii={},oi={},li={},ai={},vo={},Co={},ko={},ci={},bo={},ui={},fi={},di={},Hr={},$r={},tr={},To={},So={},wo={},No={},hi={},gi={},_i={};function pi(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var N=pi(function(n){const e=new URLSearchParams;e.append("code",n);for(let t=1;t<arguments.length;t++)e.append("v",arguments[t]);throw Error(`Minified Lexical error #${n}; visit https://lexical.dev/docs/error?${e} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)});const se=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,mi=se&&"documentMode"in document?document.documentMode:null,te=se&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),pe=se&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),mt=!(!se||!("InputEvent"in window)||mi)&&"getTargetRanges"in new window.InputEvent("input"),wn=se&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),It=se&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,yi=se&&/Android/.test(navigator.userAgent),qr=se&&/^(?=.*Chrome).*/i.test(navigator.userAgent),xi=se&&yi&&qr,Nn=se&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!qr,Ye=1,xe=3,Se=0,Qr=1,Ae=2,vi=0,Ci=1,ki=2,yt=4,xt=8,bi=240|(3|yt|xt),En=1,Pn=2,In=3,Fn=4,Ln=5,Dn=6,Ft=wn||It||Nn?" ":"​",ce=`

`,Ti=pe?" ":Ft,Xr="֑-߿יִ-﷽ﹰ-ﻼ",Zr="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",Si=new RegExp("^[^"+Zr+"]*["+Xr+"]"),wi=new RegExp("^[^"+Xr+"]*["+Zr+"]"),we={bold:1,code:16,highlight:128,italic:2,strikethrough:yt,subscript:32,superscript:64,underline:xt},Ni={directionless:1,unmergeable:2},nr={center:Pn,end:Dn,justify:Fn,left:En,right:In,start:Ln},Ei={[Pn]:"center",[Dn]:"end",[Fn]:"justify",[En]:"left",[In]:"right",[Ln]:"start"},Pi={normal:0,segmented:2,token:1},Ii={[vi]:"normal",[ki]:"segmented",[Ci]:"token"};function vt(...n){const e=[];for(const t of n)if(t&&typeof t=="string")for(const[r]of t.matchAll(/\S+/g))e.push(r);return e}const Fi=100;let an=!1,On=0;function Li(n){On=n.timeStamp}function Qt(n,e,t){return e.__lexicalLineBreak===n||n[`__lexicalKey_${t._key}`]!==void 0}function Di(n,e,t){const r=ie(t._window);let s=null,i=null;r!==null&&r.anchorNode===n&&(s=r.anchorOffset,i=r.focusOffset);const o=n.nodeValue;o!==null&&zn(e,o,s,i,!1)}function Oi(n,e,t){if(I(n)){const r=n.anchor.getNode();if(r.is(t)&&n.format!==r.getFormat())return!1}return e.nodeType===xe&&t.isAttached()}function Gr(n,e,t){an=!0;const r=performance.now()-On>Fi;try{Z(n,()=>{const s=A()||function(u){return u.getEditorState().read(()=>{const d=A();return d!==null?d.clone():null})}(n),i=new Map,o=n.getRootElement(),l=n._editorState,a=n._blockCursorElement;let c=!1,f="";for(let u=0;u<e.length;u++){const d=e[u],g=d.type,p=d.target;let _=Dt(p,l);if(!(_===null&&p!==o||B(_))){if(g==="characterData")r&&P(_)&&Oi(s,p,_)&&Di(p,_,n);else if(g==="childList"){c=!0;const b=d.addedNodes;for(let x=0;x<b.length;x++){const C=b[x],v=rs(C),T=C.parentNode;if(T!=null&&C!==a&&v===null&&(C.nodeName!=="BR"||!Qt(C,T,n))){if(pe){const S=C.innerText||C.nodeValue;S&&(f+=S)}T.removeChild(C)}}const m=d.removedNodes,y=m.length;if(y>0){let x=0;for(let C=0;C<y;C++){const v=m[C];(v.nodeName==="BR"&&Qt(v,p,n)||a===v)&&(p.appendChild(v),x++)}y!==x&&(p===o&&(_=is(l)),i.set(p,_))}}}}if(i.size>0)for(const[u,d]of i)if(k(d)){const g=d.getChildrenKeys();let p=u.firstChild;for(let _=0;_<g.length;_++){const b=g[_],m=n.getElementByKey(b);m!==null&&(p==null?(u.appendChild(m),p=m):p!==m&&u.replaceChild(m,p),p=p.nextSibling)}}else P(d)&&d.markDirty();const h=t.takeRecords();if(h.length>0){for(let u=0;u<h.length;u++){const d=h[u],g=d.addedNodes,p=d.target;for(let _=0;_<g.length;_++){const b=g[_],m=b.parentNode;m==null||b.nodeName!=="BR"||Qt(b,p,n)||m.removeChild(b)}}t.takeRecords()}s!==null&&(c&&(s.dirty=!0,ue(s)),pe&&cs(n)&&s.insertRawText(f))})}finally{an=!1}}function Yr(n){const e=n._observer;e!==null&&Gr(n,e.takeRecords(),e)}function es(n){(function(e){On===0&&Mt(e).addEventListener("textInput",Li,!0)})(n),n._observer=new MutationObserver((e,t)=>{Gr(n,e,t)})}function rr(n,e){const t=n.__mode,r=n.__format,s=n.__style,i=e.__mode,o=e.__format,l=e.__style;return!(t!==null&&t!==i||r!==null&&r!==o||s!==null&&s!==l)}function sr(n,e){const t=n.mergeWithSibling(e),r=M()._normalizedNodes;return r.add(n.__key),r.add(e.__key),t}function ir(n){let e,t,r=n;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(e=r.getPreviousSibling())!==null&&P(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(e.__text!==""){if(rr(e,r)){r=sr(e,r);break}break}e.remove()}for(;(t=r.getNextSibling())!==null&&P(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(rr(r,t)){r=sr(r,t);break}break}t.remove()}}else r.remove()}function Ai(n){return or(n.anchor),or(n.focus),n}function or(n){for(;n.type==="element";){const e=n.getNode(),t=n.offset;let r,s;if(t===e.getChildrenSize()?(r=e.getChildAtIndex(t-1),s=!0):(r=e.getChildAtIndex(t),s=!1),P(r)){n.set(r.__key,s?r.getTextContentSize():0,"text");break}if(!k(r))break;n.set(r.__key,s?r.getChildrenSize():0,"element")}}let Mi=1;const zi=typeof queueMicrotask=="function"?queueMicrotask:n=>{Promise.resolve().then(n)};function ts(n){const e=document.activeElement;if(e===null)return!1;const t=e.nodeName;return B(Dt(n))&&(t==="INPUT"||t==="TEXTAREA"||e.contentEditable==="true"&&e.__lexicalEditor==null)}function Lt(n,e,t){const r=n.getRootElement();try{return r!==null&&r.contains(e)&&r.contains(t)&&e!==null&&!ts(e)&&ns(e)===n}catch{return!1}}function ns(n){let e=n;for(;e!=null;){const t=e.__lexicalEditor;if(t!=null)return t;e=At(e)}return null}function Pe(n){return n.isToken()||n.isSegmented()}function Bi(n){return n.nodeType===xe}function Ct(n){let e=n;for(;e!=null;){if(Bi(e))return e;e=e.firstChild}return null}function cn(n,e,t){const r=we[e];if(t!==null&&(n&r)==(t&r))return n;let s=n^r;return e==="subscript"?s&=-65:e==="superscript"&&(s&=-33),s}function Eo(n){return P(n)||Oe(n)||B(n)}function Wi(n,e){if(e!=null)return void(n.__key=e);Q(),Ps();const t=M(),r=fe(),s=""+Mi++;r._nodeMap.set(s,n),k(n)?t._dirtyElements.set(s,!0):t._dirtyLeaves.add(s),t._cloneNotNeeded.add(s),t._dirtyType=Qr,n.__key=s}function be(n){const e=n.getParent();if(e!==null){const t=n.getWritable(),r=e.getWritable(),s=n.getPreviousSibling(),i=n.getNextSibling();if(s===null)if(i!==null){const o=i.getWritable();r.__first=i.__key,o.__prev=null}else r.__first=null;else{const o=s.getWritable();if(i!==null){const l=i.getWritable();l.__prev=o.__key,o.__next=l.__key}else o.__next=null;t.__prev=null}if(i===null)if(s!==null){const o=s.getWritable();r.__last=s.__key,o.__next=null}else r.__last=null;else{const o=i.getWritable();if(s!==null){const l=s.getWritable();l.__next=o.__key,o.__prev=l.__key}else o.__prev=null;t.__next=null}r.__size--,t.__parent=null}}function kt(n){Ps();const e=n.getLatest(),t=e.__parent,r=fe(),s=M(),i=r._nodeMap,o=s._dirtyElements;t!==null&&function(a,c,f){let h=a;for(;h!==null;){if(f.has(h))return;const u=c.get(h);if(u===void 0)break;f.set(h,!1),h=u.__parent}}(t,i,o);const l=e.__key;s._dirtyType=Qr,k(n)?o.set(l,!0):s._dirtyLeaves.add(l)}function J(n){Q();const e=M(),t=e._compositionKey;if(n!==t){if(e._compositionKey=n,t!==null){const r=j(t);r!==null&&r.getWritable()}if(n!==null){const r=j(n);r!==null&&r.getWritable()}}}function _e(){return st()?null:M()._compositionKey}function j(n,e){const t=(e||fe())._nodeMap.get(n);return t===void 0?null:t}function rs(n,e){const t=n[`__lexicalKey_${M()._key}`];return t!==void 0?j(t,e):null}function Dt(n,e){let t=n;for(;t!=null;){const r=rs(t,e);if(r!==null)return r;t=At(t)}return null}function ss(n){const e=n._decorators,t=Object.assign({},e);return n._pendingDecorators=t,t}function lr(n){return n.read(()=>ee().getTextContent())}function ee(){return is(fe())}function is(n){return n._nodeMap.get("root")}function ue(n){Q();const e=fe();n!==null&&(n.dirty=!0,n.setCachedNodes(null)),e._selection=n}function Le(n){const e=M(),t=function(r,s){let i=r;for(;i!=null;){const o=i[`__lexicalKey_${s._key}`];if(o!==void 0)return o;i=At(i)}return null}(n,e);return t===null?n===e.getRootElement()?j("root"):null:j(t)}function ar(n,e){return e?n.getTextContentSize():0}function os(n){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)}function An(n){const e=[];let t=n;for(;t!==null;)e.push(t),t=t._parentEditor;return e}function ls(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function as(n){return n.nodeType===xe?n.nodeValue:null}function Mn(n,e,t){const r=ie(e._window);if(r===null)return;const s=r.anchorNode;let{anchorOffset:i,focusOffset:o}=r;if(s!==null){let l=as(s);const a=Dt(s);if(l!==null&&P(a)){if(l===Ft&&t){const c=t.length;l=t,i=c,o=c}l!==null&&zn(a,l,i,o,n)}}}function zn(n,e,t,r,s){let i=n;if(i.isAttached()&&(s||!i.isDirty())){const o=i.isComposing();let l=e;(o||s)&&e[e.length-1]===Ft&&(l=e.slice(0,-1));const a=i.getTextContent();if(s||l!==a){if(l===""){if(J(null),wn||It||Nn)i.remove();else{const p=M();setTimeout(()=>{p.update(()=>{i.isAttached()&&i.remove()})},20)}return}const c=i.getParent(),f=rt(),h=i.getTextContentSize(),u=_e(),d=i.getKey();if(i.isToken()||u!==null&&d===u&&!o||I(f)&&(c!==null&&!c.canInsertTextBefore()&&f.anchor.offset===0||f.anchor.key===n.__key&&f.anchor.offset===0&&!i.canInsertTextBefore()&&!o||f.focus.key===n.__key&&f.focus.offset===h&&!i.canInsertTextAfter()&&!o))return void i.markDirty();const g=A();if(!I(g)||t===null||r===null)return void i.setTextContent(l);if(g.setTextNodeRange(i,t,i,r),i.isSegmented()){const p=V(i.getTextContent());i.replace(p),i=p}i.setTextContent(l)}}}function Ri(n,e){if(e.isSegmented())return!0;if(!n.isCollapsed())return!1;const t=n.anchor.offset,r=e.getParentOrThrow(),s=e.isToken();return t===0?!e.canInsertTextBefore()||!r.canInsertTextBefore()&&!e.isComposing()||s||function(i){const o=i.getPreviousSibling();return(P(o)||k(o)&&o.isInline())&&!o.canInsertTextAfter()}(e):t===e.getTextContentSize()&&(!e.canInsertTextAfter()||!r.canInsertTextAfter()&&!e.isComposing()||s)}function cr(n){return n==="ArrowLeft"}function ur(n){return n==="ArrowRight"}function Je(n,e){return te?n:e}function fr(n){return n==="Enter"}function Re(n){return n==="Backspace"}function Ke(n){return n==="Delete"}function dr(n,e,t){return n.toLowerCase()==="a"&&Je(e,t)}function Po(){const n=ee();ue(Ai(n.select(0,n.getChildrenSize())))}function He(n,e){n.__lexicalClassNameCache===void 0&&(n.__lexicalClassNameCache={});const t=n.__lexicalClassNameCache,r=t[e];if(r!==void 0)return r;const s=n[e];if(typeof s=="string"){const i=vt(s);return t[e]=i,i}return s}function Bn(n,e,t,r,s){if(t.size===0)return;const i=r.__type,o=r.__key,l=e.get(i);l===void 0&&N(33,i);const a=l.klass;let c=n.get(a);c===void 0&&(c=new Map,n.set(a,c));const f=c.get(o),h=f==="destroyed"&&s==="created";(f===void 0||h)&&c.set(o,h?"updated":s)}function hr(n,e,t){const r=n.getParent();let s=t,i=n;return r!==null&&(e&&t===0?(s=i.getIndexWithinParent(),i=r):e||t!==i.getChildrenSize()||(s=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(e?s-1:s)}function gr(n,e){const t=n.offset;if(n.type==="element")return hr(n.getNode(),e,t);{const r=n.getNode();if(e&&t===0||!e&&t===r.getTextContentSize()){const s=e?r.getPreviousSibling():r.getNextSibling();return s===null?hr(r.getParentOrThrow(),e,r.getIndexWithinParent()+(e?0:1)):s}}return null}function cs(n){const e=Mt(n).event,t=e&&e.inputType;return t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function E(n,e,t){return Is(n,e,t)}function Ot(n){return!G(n)&&!n.isLastChild()&&!n.isInline()}function bt(n,e){const t=n._keyToDOMMap.get(e);return t===void 0&&N(75,e),t}function At(n){const e=n.assignedSlot||n.parentElement;return e!==null&&e.nodeType===11?e.host:e}function un(n,e){let t=n.getParent();for(;t!==null;){if(t.is(e))return!0;t=t.getParent()}return!1}function Mt(n){const e=n._window;return e===null&&N(78),e}function Ki(n){let e=n.getParentOrThrow();for(;e!==null;){if(et(e))return e;e=e.getParentOrThrow()}return e}function et(n){return G(n)||k(n)&&n.isShadowRoot()}function zt(n){const e=M(),t=n.constructor.getType(),r=e._nodes.get(t);r===void 0&&N(97);const s=r.replace;if(s!==null){const i=s(n);return i instanceof n.constructor||N(98),i}return n}function Xt(n,e){!G(n.getParent())||k(e)||B(e)||N(99)}function Zt(n){return(B(n)||k(n)&&!n.canBeEmpty())&&!n.isInline()}function Wn(n,e,t){t.style.removeProperty("caret-color"),e._blockCursorElement=null;const r=n.parentElement;r!==null&&r.removeChild(n)}function Ui(n,e,t){let r=n._blockCursorElement;if(I(t)&&t.isCollapsed()&&t.anchor.type==="element"&&e.contains(document.activeElement)){const s=t.anchor,i=s.getNode(),o=s.offset;let l=!1,a=null;if(o===i.getChildrenSize())Zt(i.getChildAtIndex(o-1))&&(l=!0);else{const c=i.getChildAtIndex(o);if(Zt(c)){const f=c.getPreviousSibling();(f===null||Zt(f))&&(l=!0,a=n.getElementByKey(c.__key))}}if(l){const c=n.getElementByKey(i.__key);return r===null&&(n._blockCursorElement=r=function(f){const h=f.theme,u=document.createElement("div");u.contentEditable="false",u.setAttribute("data-lexical-cursor","true");let d=h.blockCursor;if(d!==void 0){if(typeof d=="string"){const g=vt(d);d=h.blockCursor=g}d!==void 0&&u.classList.add(...d)}return u}(n._config)),e.style.caretColor="transparent",void(a===null?c.appendChild(r):c.insertBefore(r,a))}}r!==null&&Wn(r,n,e)}function ie(n){return se?(n||window).getSelection():null}function Io(n){return Rn(n)&&n.tagName==="A"}function Rn(n){return n.nodeType===1}function Ji(n){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return n.nodeName.match(e)!==null}function Fo(n){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return n.nodeName.match(e)!==null}function Ie(n){if(G(n)||B(n)&&!n.isInline())return!0;if(!k(n)||et(n))return!1;const e=n.getFirstChild(),t=e===null||Oe(e)||P(e)||e.isInline();return!n.isInline()&&n.canBeEmpty()!==!1&&t}function Gt(n,e){let t=n;for(;t!==null&&t.getParent()!==null&&!e(t);)t=t.getParentOrThrow();return e(t)?t:null}function us(n,e,t,r,s,i){let o=n.getFirstChild();for(;o!==null;){const l=o.__key;o.__parent===e&&(k(o)&&us(o,l,t,r,s,i),t.has(l)||i.delete(l),s.push(l)),o=o.getNextSibling()}}let ye,$,Xe,Bt,fn,dn,Ne,re,hn,Ze,W="",H="",ne=null,ae="",fs=!1,Kn=!1,dt=null;function Tt(n,e){const t=Ne.get(n);if(e!==null){const r=pn(n);r.parentNode===e&&e.removeChild(r)}if(re.has(n)||$._keyToDOMMap.delete(n),k(t)){const r=wt(t,Ne);gn(r,0,r.length-1,null)}t!==void 0&&Bn(Ze,Xe,Bt,t,"destroyed")}function gn(n,e,t,r){let s=e;for(;s<=t;++s){const i=n[s];i!==void 0&&Tt(i,r)}}function Ce(n,e){n.setProperty("text-align",e)}const Vi="40px";function ds(n,e){const t=ye.theme.indent;if(typeof t=="string"){const s=n.classList.contains(t);e>0&&!s?n.classList.add(t):e<1&&s&&n.classList.remove(t)}const r=getComputedStyle(n).getPropertyValue("--lexical-indent-base-value")||Vi;n.style.setProperty("padding-inline-start",e===0?"":`calc(${e} * ${r})`)}function hs(n,e){const t=n.style;e===0?Ce(t,""):e===En?Ce(t,"left"):e===Pn?Ce(t,"center"):e===In?Ce(t,"right"):e===Fn?Ce(t,"justify"):e===Ln?Ce(t,"start"):e===Dn&&Ce(t,"end")}function St(n,e,t){const r=re.get(n);r===void 0&&N(60);const s=r.createDOM(ye,$);if(function(i,o,l){const a=l._keyToDOMMap;o["__lexicalKey_"+l._key]=i,a.set(i,o)}(n,s,$),P(r)?s.setAttribute("data-lexical-text","true"):B(r)&&s.setAttribute("data-lexical-decorator","true"),k(r)){const i=r.__indent,o=r.__size;if(i!==0&&ds(s,i),o!==0){const a=o-1;(function(c,f,h,u){const d=H;H="",_n(c,h,0,f,u,null),_s(h,u),H=d})(wt(r,re),a,r,s)}const l=r.__format;l!==0&&hs(s,l),r.isInline()||gs(null,r,s),Ot(r)&&(W+=ce,ae+=ce)}else{const i=r.getTextContent();if(B(r)){const o=r.decorate($,ye);o!==null&&ps(n,o),s.contentEditable="false"}else P(r)&&(r.isDirectionless()||(H+=i));W+=i,ae+=i}if(e!==null)if(t!=null)e.insertBefore(s,t);else{const i=e.__lexicalLineBreak;i!=null?e.insertBefore(s,i):e.appendChild(s)}return Bn(Ze,Xe,Bt,r,"created"),s}function _n(n,e,t,r,s,i){const o=W;W="";let l=t;for(;l<=r;++l){St(n[l],s,i);const a=re.get(n[l]);a!==null&&ne===null&&P(a)&&(ne=a.getFormat())}Ot(e)&&(W+=ce),s.__lexicalTextContent=W,W=o+W}function _r(n,e){const t=e.get(n);return Oe(t)||B(t)&&t.isInline()}function gs(n,e,t){const r=n!==null&&(n.__size===0||_r(n.__last,Ne)),s=e.__size===0||_r(e.__last,re);if(r){if(!s){const i=t.__lexicalLineBreak;i!=null&&t.removeChild(i),t.__lexicalLineBreak=null}}else if(s){const i=document.createElement("br");t.__lexicalLineBreak=i,t.appendChild(i)}}function _s(n,e){const t=e.__lexicalDirTextContent,r=e.__lexicalDir;if(t!==H||r!==dt){const i=H==="",o=i?dt:(s=H,Si.test(s)?"rtl":wi.test(s)?"ltr":null);if(o!==r){const l=e.classList,a=ye.theme;let c=r!==null?a[r]:void 0,f=o!==null?a[o]:void 0;if(c!==void 0){if(typeof c=="string"){const h=vt(c);c=a[r]=h}l.remove(...c)}if(o===null||i&&o==="ltr")e.removeAttribute("dir");else{if(f!==void 0){if(typeof f=="string"){const h=vt(f);f=a[o]=h}f!==void 0&&l.add(...f)}e.dir=o}Kn||(n.getWritable().__dir=o)}dt=o,e.__lexicalDirTextContent=H,e.__lexicalDir=o}var s}function ji(n,e,t){const r=H;var s;H="",ne=null,function(i,o,l){const a=W,c=i.__size,f=o.__size;if(W="",c===1&&f===1){const h=i.__first,u=o.__first;if(h===u)Ve(h,l);else{const g=pn(h),p=St(u,null,null);l.replaceChild(p,g),Tt(h,null)}const d=re.get(u);ne===null&&P(d)&&(ne=d.getFormat())}else{const h=wt(i,Ne),u=wt(o,re);if(c===0)f!==0&&_n(u,o,0,f-1,l,null);else if(f===0){if(c!==0){const d=l.__lexicalLineBreak==null;gn(h,0,c-1,d?null:l),d&&(l.textContent="")}}else(function(d,g,p,_,b,m){const y=_-1,x=b-1;let C,v,T=(F=m,F.firstChild),S=0,w=0;for(var F;S<=y&&w<=x;){const D=g[S],L=p[w];if(D===L)T=Yt(Ve(L,m)),S++,w++;else{C===void 0&&(C=new Set(g)),v===void 0&&(v=new Set(p));const Y=v.has(D),Ee=C.has(L);if(Y)if(Ee){const Be=bt($,L);Be===T?T=Yt(Ve(L,m)):(T!=null?m.insertBefore(Be,T):m.appendChild(Be),Ve(L,m)),S++,w++}else St(L,m,T),w++;else T=Yt(pn(D)),Tt(D,m),S++}const U=re.get(L);U!==null&&ne===null&&P(U)&&(ne=U.getFormat())}const O=S>y,q=w>x;if(O&&!q){const D=p[x+1];_n(p,d,w,x,m,D===void 0?null:$.getElementByKey(D))}else q&&!O&&gn(g,S,y,m)})(o,h,u,c,f,l)}Ot(o)&&(W+=ce),l.__lexicalTextContent=W,W=a+W}(n,e,t),_s(e,t),kn(s=e)&&ne!=null&&ne!==s.__textFormat&&s.setTextFormat(ne),H=r,ne=null}function wt(n,e){const t=[];let r=n.__first;for(;r!==null;){const s=e.get(r);s===void 0&&N(101),t.push(r),r=s.__next}return t}function Ve(n,e){const t=Ne.get(n);let r=re.get(n);t!==void 0&&r!==void 0||N(61);const s=fs||dn.has(n)||fn.has(n),i=bt($,n);if(t===r&&!s){if(k(t)){const o=i.__lexicalTextContent;o!==void 0&&(W+=o,ae+=o);const l=i.__lexicalDirTextContent;l!==void 0&&(H+=l)}else{const o=t.getTextContent();P(t)&&!t.isDirectionless()&&(H+=o),ae+=o,W+=o}return i}if(t!==r&&s&&Bn(Ze,Xe,Bt,r,"updated"),r.updateDOM(t,i,ye)){const o=St(n,null,null);return e===null&&N(62),e.replaceChild(o,i),Tt(n,null),o}if(k(t)&&k(r)){const o=r.__indent;o!==t.__indent&&ds(i,o);const l=r.__format;l!==t.__format&&hs(i,l),s&&(ji(t,r,i),G(r)||r.isInline()||gs(t,r,i)),Ot(r)&&(W+=ce,ae+=ce)}else{const o=r.getTextContent();if(B(r)){const l=r.decorate($,ye);l!==null&&ps(n,l)}else P(r)&&!r.isDirectionless()&&(H+=o);W+=o,ae+=o}if(!Kn&&G(r)&&r.__cachedText!==ae){const o=r.getWritable();o.__cachedText=ae,r=o}return i}function ps(n,e){let t=$._pendingDecorators;const r=$._decorators;if(t===null){if(r[n]===e)return;t=ss($)}t[n]=e}function Yt(n){let e=n.nextSibling;return e!==null&&e===$._blockCursorElement&&(e=e.nextSibling),e}function Hi(n,e,t,r,s,i){W="",ae="",H="",fs=r===Ae,dt=null,$=t,ye=t._config,Xe=t._nodes,Bt=$._listeners.mutation,fn=s,dn=i,Ne=n._nodeMap,re=e._nodeMap,Kn=e._readOnly,hn=new Map(t._keyToDOMMap);const o=new Map;return Ze=o,Ve("root",null),$=void 0,Xe=void 0,fn=void 0,dn=void 0,Ne=void 0,re=void 0,ye=void 0,hn=void 0,Ze=void 0,o}function pn(n){const e=hn.get(n);return e===void 0&&N(75,n),e}const le=Object.freeze({}),mn=30,yn=[["keydown",function(n,e){if($e=n.timeStamp,ms=n.key,e.isComposing())return;const{key:t,shiftKey:r,ctrlKey:s,metaKey:i,altKey:o}=n;E(e,Zs,n)||t!=null&&(function(l,a,c,f){return ur(l)&&!a&&!f&&!c}(t,s,o,i)?E(e,Gs,n):function(l,a,c,f,h){return ur(l)&&!f&&!c&&(a||h)}(t,s,r,o,i)?E(e,Ys,n):function(l,a,c,f){return cr(l)&&!a&&!f&&!c}(t,s,o,i)?E(e,ei,n):function(l,a,c,f,h){return cr(l)&&!f&&!c&&(a||h)}(t,s,r,o,i)?E(e,ti,n):function(l,a,c){return function(f){return f==="ArrowUp"}(l)&&!a&&!c}(t,s,i)?E(e,ni,n):function(l,a,c){return function(f){return f==="ArrowDown"}(l)&&!a&&!c}(t,s,i)?E(e,ri,n):function(l,a){return fr(l)&&a}(t,r)?(qe=!0,E(e,ln,n)):function(l){return l===" "}(t)?E(e,si,n):function(l,a){return te&&a&&l.toLowerCase()==="o"}(t,s)?(n.preventDefault(),qe=!0,E(e,ft,!0)):function(l,a){return fr(l)&&!a}(t,r)?(qe=!1,E(e,ln,n)):function(l,a,c,f){return te?!a&&!c&&(Re(l)||l.toLowerCase()==="h"&&f):!(f||a||c)&&Re(l)}(t,o,i,s)?Re(t)?E(e,ii,n):(n.preventDefault(),E(e,gt,!0)):function(l){return l==="Escape"}(t)?E(e,oi,n):function(l,a,c,f,h){return te?!(c||f||h)&&(Ke(l)||l.toLowerCase()==="d"&&a):!(a||f||h)&&Ke(l)}(t,s,r,o,i)?Ke(t)?E(e,li,n):(n.preventDefault(),E(e,gt,!1)):function(l,a,c){return Re(l)&&(te?a:c)}(t,o,s)?(n.preventDefault(),E(e,_t,!0)):function(l,a,c){return Ke(l)&&(te?a:c)}(t,o,s)?(n.preventDefault(),E(e,_t,!1)):function(l,a){return te&&a&&Re(l)}(t,i)?(n.preventDefault(),E(e,pt,!0)):function(l,a){return te&&a&&Ke(l)}(t,i)?(n.preventDefault(),E(e,pt,!1)):function(l,a,c,f){return l.toLowerCase()==="b"&&!a&&Je(c,f)}(t,o,i,s)?(n.preventDefault(),E(e,ke,"bold")):function(l,a,c,f){return l.toLowerCase()==="u"&&!a&&Je(c,f)}(t,o,i,s)?(n.preventDefault(),E(e,ke,"underline")):function(l,a,c,f){return l.toLowerCase()==="i"&&!a&&Je(c,f)}(t,o,i,s)?(n.preventDefault(),E(e,ke,"italic")):function(l,a,c,f){return l==="Tab"&&!a&&!c&&!f}(t,o,s,i)?E(e,ai,n):function(l,a,c,f){return l.toLowerCase()==="z"&&!a&&Je(c,f)}(t,r,i,s)?(n.preventDefault(),E(e,Vr,void 0)):function(l,a,c,f){return te?l.toLowerCase()==="z"&&c&&a:l.toLowerCase()==="y"&&f||l.toLowerCase()==="z"&&f&&a}(t,r,i,s)?(n.preventDefault(),E(e,jr,void 0)):Kt(e._editorState._selection)?function(l,a,c,f){return!a&&l.toLowerCase()==="c"&&(te?c:f)}(t,r,i,s)?(n.preventDefault(),E(e,Hr,n)):function(l,a,c,f){return!a&&l.toLowerCase()==="x"&&(te?c:f)}(t,r,i,s)?(n.preventDefault(),E(e,$r,n)):dr(t,i,s)&&(n.preventDefault(),E(e,tr,n)):!pe&&dr(t,i,s)&&(n.preventDefault(),E(e,tr,n)),function(l,a,c,f){return l||a||c||f}(s,r,o,i)&&E(e,_i,n))}],["pointerdown",function(n,e){const t=n.target,r=n.pointerType;t instanceof Node&&r!=="touch"&&Z(e,()=>{B(Dt(t))||(vn=!0)})}],["compositionstart",function(n,e){Z(e,()=>{const t=A();if(I(t)&&!e.isComposing()){const r=t.anchor,s=t.anchor.getNode();J(r.key),(n.timeStamp<$e+mn||r.type==="element"||!t.isCollapsed()||s.getFormat()!==t.format||P(s)&&s.getStyle()!==t.style)&&E(e,je,Ti)}})}],["compositionend",function(n,e){pe?Ue=!0:Z(e,()=>{en(e,n.data)})}],["input",function(n,e){n.stopPropagation(),Z(e,()=>{const t=A(),r=n.data,s=Cs(n);if(r!=null&&I(t)&&vs(t,s,r,n.timeStamp,!1)){Ue&&(en(e,r),Ue=!1);const i=t.anchor.getNode(),o=ie(e._window);if(o===null)return;const l=t.isBackward(),a=l?t.anchor.offset:t.focus.offset,c=l?t.focus.offset:t.anchor.offset;mt&&!t.isCollapsed()&&P(i)&&o.anchorNode!==null&&i.getTextContent().slice(0,a)+r+i.getTextContent().slice(a+c)===as(o.anchorNode)||E(e,je,r);const f=r.length;pe&&f>1&&n.inputType==="insertCompositionText"&&!e.isComposing()&&(t.anchor.offset-=f),wn||It||Nn||!e.isComposing()||($e=0,J(null))}else Mn(!1,e,r!==null?r:void 0),Ue&&(en(e,r||void 0),Ue=!1);Q(),Yr(M())}),Fe=null}],["click",function(n,e){Z(e,()=>{const t=A(),r=ie(e._window),s=rt();if(r){if(I(t)){const i=t.anchor,o=i.getNode();i.type==="element"&&i.offset===0&&t.isCollapsed()&&!G(o)&&ee().getChildrenSize()===1&&o.getTopLevelElementOrThrow().isEmpty()&&s!==null&&t.is(s)?(r.removeAllRanges(),t.dirty=!0):n.detail===3&&!t.isCollapsed()&&o!==t.focus.getNode()&&(k(o)?o.select(0):o.getParentOrThrow().select(0))}else if(n.pointerType==="touch"){const i=r.anchorNode;if(i!==null){const o=i.nodeType;(o===Ye||o===xe)&&ue(Vn(s,r,e,n))}}}E(e,Xs,n)})}],["cut",le],["copy",le],["dragstart",le],["dragover",le],["dragend",le],["paste",le],["focus",le],["blur",le],["drop",le]];mt&&yn.push(["beforeinput",(n,e)=>function(t,r){const s=t.inputType,i=Cs(t);s==="deleteCompositionText"||pe&&cs(r)||s!=="insertCompositionText"&&Z(r,()=>{const o=A();if(s==="deleteContentBackward"){if(o===null){const d=rt();if(!I(d))return;ue(d.clone())}if(I(o)){const d=o.anchor.key===o.focus.key;if(l=t.timeStamp,ms==="MediaLast"&&l<$e+mn&&r.isComposing()&&d){if(J(null),$e=0,setTimeout(()=>{Z(r,()=>{J(null)})},mn),I(o)){const g=o.anchor.getNode();g.markDirty(),o.format=g.getFormat(),P(g)||N(142),o.style=g.getStyle()}}else{J(null),t.preventDefault();const g=o.anchor.getNode().getTextContent(),p=o.anchor.offset===0&&o.focus.offset===g.length;xi&&d&&!p||E(r,gt,!0)}return}}var l;if(!I(o))return;const a=t.data;Fe!==null&&Mn(!1,r,Fe),o.dirty&&Fe===null||!o.isCollapsed()||G(o.anchor.getNode())||i===null||o.applyDOMRange(i),Fe=null;const c=o.anchor,f=o.focus,h=c.getNode(),u=f.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(t.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":E(r,je,t);break;case"insertFromComposition":J(null),E(r,je,t);break;case"insertLineBreak":J(null),E(r,ft,!1);break;case"insertParagraph":J(null),qe&&!It?(qe=!1,E(r,ft,!1)):E(r,Yn,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":E(r,Jr,t);break;case"deleteByComposition":(function(d,g){return d!==g||k(d)||k(g)||!d.isToken()||!g.isToken()})(h,u)&&E(r,er,t);break;case"deleteByDrag":case"deleteByCut":E(r,er,t);break;case"deleteContent":E(r,gt,!1);break;case"deleteWordBackward":E(r,_t,!0);break;case"deleteWordForward":E(r,_t,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":E(r,pt,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":E(r,pt,!1);break;case"formatStrikeThrough":E(r,ke,"strikethrough");break;case"formatBold":E(r,ke,"bold");break;case"formatItalic":E(r,ke,"italic");break;case"formatUnderline":E(r,ke,"underline");break;case"historyUndo":E(r,Vr,void 0);break;case"historyRedo":E(r,jr,void 0)}else{if(a===`
`)t.preventDefault(),E(r,ft,!1);else if(a===ce)t.preventDefault(),E(r,Yn,void 0);else if(a==null&&t.dataTransfer){const d=t.dataTransfer.getData("text/plain");t.preventDefault(),o.insertRawText(d)}else a!=null&&vs(o,i,a,t.timeStamp,!0)?(t.preventDefault(),E(r,je,a)):Fe=a;ys=t.timeStamp}})}(n,e)]);let $e=0,ms=null,ys=0,Fe=null;const Nt=new WeakMap;let xn=!1,vn=!1,qe=!1,Ue=!1,xs=[0,"",0,"root",0];function vs(n,e,t,r,s){const i=n.anchor,o=n.focus,l=i.getNode(),a=M(),c=ie(a._window),f=c!==null?c.anchorNode:null,h=i.key,u=a.getElementByKey(h),d=t.length;return h!==o.key||!P(l)||(!s&&(!mt||ys<r+50)||l.isDirty()&&d<2||os(t))&&i.offset!==o.offset&&!l.isComposing()||Pe(l)||l.isDirty()&&d>1||(s||!mt)&&u!==null&&!l.isComposing()&&f!==Ct(u)||c!==null&&e!==null&&(!e.collapsed||e.startContainer!==c.anchorNode||e.startOffset!==c.anchorOffset)||l.getFormat()!==n.format||l.getStyle()!==n.style||Ri(n,l)}function pr(n,e){return n!==null&&n.nodeValue!==null&&n.nodeType===xe&&e!==0&&e!==n.nodeValue.length}function mr(n,e,t){const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o}=n;xn&&(xn=!1,pr(r,s)&&pr(i,o))||Z(e,()=>{if(!t)return void ue(null);if(!Lt(e,r,i))return;const l=A();if(I(l)){const a=l.anchor,c=a.getNode();if(l.isCollapsed()){n.type==="Range"&&n.anchorNode===n.focusNode&&(l.dirty=!0);const f=Mt(e).event,h=f?f.timeStamp:performance.now(),[u,d,g,p,_]=xs,b=ee(),m=e.isComposing()===!1&&b.getTextContent()==="";if(h<_+200&&a.offset===g&&a.key===p)l.format=u,l.style=d;else if(a.type==="text")P(c)||N(141),l.format=c.getFormat(),l.style=c.getStyle();else if(a.type==="element"&&!m){const y=a.getNode();y instanceof ze&&y.getChildrenSize()===0?l.format=y.getTextFormat():l.format=0,l.style=""}}else{const f=a.key,h=l.focus.key,u=l.getNodes(),d=u.length,g=l.isBackward(),p=g?o:s,_=g?s:o,b=g?h:f,m=g?f:h;let y=bi,x=!1;for(let C=0;C<d;C++){const v=u[C],T=v.getTextContentSize();if(P(v)&&T!==0&&!(C===0&&v.__key===b&&p===T||C===d-1&&v.__key===m&&_===0)&&(x=!0,y&=v.getFormat(),y===0))break}l.format=x?y:0}}E(e,Sn,void 0)})}function Cs(n){if(!n.getTargetRanges)return null;const e=n.getTargetRanges();return e.length===0?null:e[0]}function en(n,e){const t=n._compositionKey;if(J(null),t!==null&&e!=null){if(e===""){const r=j(t),s=Ct(n.getElementByKey(t));return void(s!==null&&s.nodeValue!==null&&P(r)&&zn(r,s.nodeValue,null,null,!0))}if(e[e.length-1]===`
`){const r=A();if(I(r)){const s=r.focus;return r.anchor.set(s.key,s.offset,s.type),void E(n,ln,null)}}}Mn(!0,n,e)}function ks(n){let e=n.__lexicalEventHandles;return e===void 0&&(e=[],n.__lexicalEventHandles=e),e}const De=new Map;function bs(n){const e=n.target,t=ie(e==null?null:e.nodeType===9?e.defaultView:e.ownerDocument.defaultView);if(t===null)return;const r=ns(t.anchorNode);if(r===null)return;vn&&(vn=!1,Z(r,()=>{const c=rt(),f=t.anchorNode;if(f===null)return;const h=f.nodeType;h!==Ye&&h!==xe||ue(Vn(c,t,r,n))}));const s=An(r),i=s[s.length-1],o=i._key,l=De.get(o),a=l||i;a!==r&&mr(t,a,!1),mr(t,r,!0),r!==i?De.set(o,r):l&&De.delete(o)}function yr(n){n._lexicalHandled=!0}function xr(n){return n._lexicalHandled===!0}function $i(n){const e=n.ownerDocument,t=Nt.get(e);t===void 0&&N(162);const r=t-1;r>=0||N(164),Nt.set(e,r),r===0&&e.removeEventListener("selectionchange",bs);const s=n.__lexicalEditor;s!=null&&(function(o){if(o._parentEditor!==null){const l=An(o),a=l[l.length-1]._key;De.get(a)===o&&De.delete(a)}else De.delete(o._key)}(s),n.__lexicalEditor=null);const i=ks(n);for(let o=0;o<i.length;o++)i[o]();n.__lexicalEventHandles=[]}function Cn(n,e,t){Q();const r=n.__key,s=n.getParent();if(s===null)return;const i=function(l){const a=A();if(!I(a)||!k(l))return a;const{anchor:c,focus:f}=a,h=c.getNode(),u=f.getNode();return un(h,l)&&c.set(l.__key,0,"element"),un(u,l)&&f.set(l.__key,0,"element"),a}(n);let o=!1;if(I(i)&&e){const l=i.anchor,a=i.focus;l.key===r&&(Pt(l,n,s,n.getPreviousSibling(),n.getNextSibling()),o=!0),a.key===r&&(Pt(a,n,s,n.getPreviousSibling(),n.getNextSibling()),o=!0)}else Kt(i)&&e&&n.isSelected()&&n.selectPrevious();if(I(i)&&e&&!o){const l=n.getIndexWithinParent();be(n),Et(i,s,l,-1)}else be(n);t||et(s)||s.canBeEmpty()||!s.isEmpty()||Cn(s,e),e&&G(s)&&s.isEmpty()&&s.selectEnd()}class Wt{static getType(){N(64,this.name)}static clone(e){N(65,this.name)}constructor(e){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Wi(this,e)}getType(){return this.__type}isInline(){N(137,this.constructor.name)}isAttached(){let e=this.__key;for(;e!==null;){if(e==="root")return!0;const t=j(e);if(t===null)break;e=t.__parent}return!1}isSelected(e){const t=e||A();if(t==null)return!1;const r=t.getNodes().some(s=>s.__key===this.__key);return(P(this)||!I(t)||t.anchor.type!=="element"||t.focus.type!=="element"||t.anchor.key!==t.focus.key||t.anchor.offset!==t.focus.offset)&&r}getKey(){return this.__key}getIndexWithinParent(){const e=this.getParent();if(e===null)return-1;let t=e.getFirstChild(),r=0;for(;t!==null;){if(this.is(t))return r;r++,t=t.getNextSibling()}return-1}getParent(){const e=this.getLatest().__parent;return e===null?null:j(e)}getParentOrThrow(){const e=this.getParent();return e===null&&N(66,this.__key),e}getTopLevelElement(){let e=this;for(;e!==null;){const t=e.getParent();if(et(t))return k(e)||N(138),e;e=t}return null}getTopLevelElementOrThrow(){const e=this.getTopLevelElement();return e===null&&N(67,this.__key),e}getParents(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t),t=t.getParent();return e}getParentKeys(){const e=[];let t=this.getParent();for(;t!==null;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){const e=this.getLatest().__prev;return e===null?null:j(e)}getPreviousSiblings(){const e=[],t=this.getParent();if(t===null)return e;let r=t.getFirstChild();for(;r!==null&&!r.is(this);)e.push(r),r=r.getNextSibling();return e}getNextSibling(){const e=this.getLatest().__next;return e===null?null:j(e)}getNextSiblings(){const e=[];let t=this.getNextSibling();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){const t=this.getParents(),r=e.getParents();k(this)&&t.unshift(this),k(e)&&r.unshift(e);const s=t.length,i=r.length;if(s===0||i===0||t[s-1]!==r[i-1])return null;const o=new Set(r);for(let l=0;l<s;l++){const a=t[l];if(o.has(a))return a}return null}is(e){return e!=null&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;const t=this.getCommonAncestor(e);let r=0,s=0,i=this;for(;;){const o=i.getParentOrThrow();if(o===t){r=i.getIndexWithinParent();break}i=o}for(i=e;;){const o=i.getParentOrThrow();if(o===t){s=i.getIndexWithinParent();break}i=o}return r<s}isParentOf(e){const t=this.__key;if(t===e.__key)return!1;let r=e;for(;r!==null;){if(r.__key===t)return!0;r=r.getParent()}return!1}getNodesBetween(e){const t=this.isBefore(e),r=[],s=new Set;let i=this;for(;i!==null;){const o=i.__key;if(s.has(o)||(s.add(o),r.push(i)),i===e)break;const l=k(i)?t?i.getFirstChild():i.getLastChild():null;if(l!==null){i=l;continue}const a=t?i.getNextSibling():i.getPreviousSibling();if(a!==null){i=a;continue}const c=i.getParentOrThrow();if(s.has(c.__key)||r.push(c),c===e)break;let f=null,h=c;do{if(h===null&&N(68),f=t?h.getNextSibling():h.getPreviousSibling(),h=h.getParent(),h===null)break;f!==null||s.has(h.__key)||r.push(h)}while(f===null);i=f}return t||r.reverse(),r}isDirty(){const e=M()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){const e=j(this.__key);return e===null&&N(113),e}getWritable(){Q();const e=fe(),t=M(),r=e._nodeMap,s=this.__key,i=this.getLatest(),o=i.__parent,l=t._cloneNotNeeded,a=A();if(a!==null&&a.setCachedNodes(null),l.has(s))return kt(i),i;const c=i.constructor.clone(i);return c.__parent=o,c.__next=i.__next,c.__prev=i.__prev,k(i)&&k(c)?(kn(i)&&kn(c)&&(c.__textFormat=i.__textFormat),c.__first=i.__first,c.__last=i.__last,c.__size=i.__size,c.__indent=i.__indent,c.__format=i.__format,c.__dir=i.__dir):P(i)&&P(c)&&(c.__format=i.__format,c.__style=i.__style,c.__mode=i.__mode,c.__detail=i.__detail),l.add(s),c.__key=s,kt(c),r.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(e,t){N(70)}updateDOM(e,t,r){N(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){N(72)}static importJSON(e){N(18,this.name)}static transform(){return null}remove(e){Cn(this,!0,e)}replace(e,t){Q();let r=A();r!==null&&(r=r.clone()),Xt(this,e);const s=this.getLatest(),i=this.__key,o=e.__key,l=e.getWritable(),a=this.getParentOrThrow().getWritable(),c=a.__size;be(l);const f=s.getPreviousSibling(),h=s.getNextSibling(),u=s.__prev,d=s.__next,g=s.__parent;if(Cn(s,!1,!0),f===null?a.__first=o:f.getWritable().__next=o,l.__prev=u,h===null?a.__last=o:h.getWritable().__prev=o,l.__next=d,l.__parent=g,a.__size=c,t&&(k(this)&&k(l)||N(139),this.getChildren().forEach(p=>{l.append(p)})),I(r)){ue(r);const p=r.anchor,_=r.focus;p.key===i&&Tr(p,l),_.key===i&&Tr(_,l)}return _e()===i&&J(o),l}insertAfter(e,t=!0){Q(),Xt(this,e);const r=this.getWritable(),s=e.getWritable(),i=s.getParent(),o=A();let l=!1,a=!1;if(i!==null){const d=e.getIndexWithinParent();if(be(s),I(o)){const g=i.__key,p=o.anchor,_=o.focus;l=p.type==="element"&&p.key===g&&p.offset===d+1,a=_.type==="element"&&_.key===g&&_.offset===d+1}}const c=this.getNextSibling(),f=this.getParentOrThrow().getWritable(),h=s.__key,u=r.__next;if(c===null?f.__last=h:c.getWritable().__prev=h,f.__size++,r.__next=h,s.__next=u,s.__prev=r.__key,s.__parent=r.__parent,t&&I(o)){const d=this.getIndexWithinParent();Et(o,f,d+1);const g=f.__key;l&&o.anchor.set(g,d+2,"element"),a&&o.focus.set(g,d+2,"element")}return e}insertBefore(e,t=!0){Q(),Xt(this,e);const r=this.getWritable(),s=e.getWritable(),i=s.__key;be(s);const o=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),a=r.__prev,c=this.getIndexWithinParent();o===null?l.__first=i:o.getWritable().__next=i,l.__size++,r.__prev=i,s.__prev=a,s.__next=r.__key,s.__parent=r.__parent;const f=A();return t&&I(f)&&Et(f,this.getParentOrThrow(),c),e}isParentRequired(){return!1}createParentElementNode(){return me()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(e,t){Q();const r=this.getPreviousSibling(),s=this.getParentOrThrow();if(r===null)return s.select(0,0);if(k(r))return r.select();if(!P(r)){const i=r.getIndexWithinParent()+1;return s.select(i,i)}return r.select(e,t)}selectNext(e,t){Q();const r=this.getNextSibling(),s=this.getParentOrThrow();if(r===null)return s.select();if(k(r))return r.select(0,0);if(!P(r)){const i=r.getIndexWithinParent();return s.select(i,i)}return r.select(e,t)}markDirty(){this.getWritable()}}class tt extends Wt{static getType(){return"linebreak"}static clone(e){return new tt(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>function(t){const r=t.parentElement;if(r!==null){const s=r.firstChild;if(s===t||s.nextSibling===t&&vr(s)){const i=r.lastChild;if(i===t||i.previousSibling===t&&vr(i))return!0}}return!1}(e)?null:{conversion:qi,priority:0}}}static importJSON(e){return Ge()}exportJSON(){return{type:"linebreak",version:1}}}function qi(n){return{node:Ge()}}function Ge(){return zt(new tt)}function Oe(n){return n instanceof tt}function vr(n){return n.nodeType===xe&&/^( |\t|\r?\n)+$/.test(n.textContent||"")}function tn(n,e){return 16&e?"code":128&e?"mark":32&e?"sub":64&e?"sup":null}function nn(n,e){return 1&e?"strong":2&e?"em":"span"}function Ts(n,e,t,r,s){const i=r.classList;let o=He(s,"base");o!==void 0&&i.add(...o),o=He(s,"underlineStrikethrough");let l=!1;const a=e&xt&&e&yt;o!==void 0&&(t&xt&&t&yt?(l=!0,a||i.add(...o)):a&&i.remove(...o));for(const c in we){const f=we[c];if(o=He(s,c),o!==void 0)if(t&f){if(l&&(c==="underline"||c==="strikethrough")){e&f&&i.remove(...o);continue}e&f&&(!a||c!=="underline")&&c!=="strikethrough"||i.add(...o)}else e&f&&i.remove(...o)}}function Ss(n,e,t){const r=e.firstChild,s=t.isComposing(),i=n+(s?Ft:"");if(r==null)e.textContent=i;else{const o=r.nodeValue;if(o!==i)if(s||pe){const[l,a,c]=function(f,h){const u=f.length,d=h.length;let g=0,p=0;for(;g<u&&g<d&&f[g]===h[g];)g++;for(;p+g<u&&p+g<d&&f[u-p-1]===h[d-p-1];)p++;return[g,u-g-p,h.slice(g,d-p)]}(o,i);a!==0&&r.deleteData(l,a),r.insertData(l,c)}else r.nodeValue=i}}function Cr(n,e,t,r,s,i){Ss(s,n,e);const o=i.theme.text;o!==void 0&&Ts(0,0,r,n,o)}function ut(n,e){const t=document.createElement(e);return t.appendChild(n),t}class Me extends Wt{static getType(){return"text"}static clone(e){return new Me(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const e=this.getLatest();return Ii[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===_e()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(e){const t=we[e];return!!(this.getFormat()&t)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return cn(this.getLatest().__format,e,t)}canHaveFormat(){return!0}createDOM(e,t){const r=this.__format,s=tn(0,r),i=nn(0,r),o=s===null?i:s,l=document.createElement(o);let a=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),s!==null&&(a=document.createElement(i),l.appendChild(a)),Cr(a,this,0,r,this.__text,e);const c=this.__style;return c!==""&&(l.style.cssText=c),l}updateDOM(e,t,r){const s=this.__text,i=e.__format,o=this.__format,l=tn(0,i),a=tn(0,o),c=nn(0,i),f=nn(0,o);if((l===null?c:l)!==(a===null?f:a))return!0;if(l===a&&c!==f){const p=t.firstChild;p==null&&N(48);const _=document.createElement(f);return Cr(_,this,0,o,s,r),t.replaceChild(_,p),!1}let h=t;a!==null&&l!==null&&(h=t.firstChild,h==null&&N(49)),Ss(s,h,this);const u=r.theme.text;u!==void 0&&i!==o&&Ts(0,i,o,h,u);const d=e.__style,g=this.__style;return d!==g&&(t.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:Gi,priority:0}),b:()=>({conversion:Xi,priority:0}),code:()=>({conversion:he,priority:0}),em:()=>({conversion:he,priority:0}),i:()=>({conversion:he,priority:0}),s:()=>({conversion:he,priority:0}),span:()=>({conversion:Qi,priority:0}),strong:()=>({conversion:he,priority:0}),sub:()=>({conversion:he,priority:0}),sup:()=>({conversion:he,priority:0}),u:()=>({conversion:he,priority:0})}}static importJSON(e){const t=V(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){let{element:t}=super.exportDOM(e);return t!==null&&Rn(t)||N(132),t.style.whiteSpace="pre-wrap",this.hasFormat("bold")&&(t=ut(t,"b")),this.hasFormat("italic")&&(t=ut(t,"i")),this.hasFormat("strikethrough")&&(t=ut(t,"s")),this.hasFormat("underline")&&(t=ut(t,"u")),{element:t}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(e,t){}setFormat(e){const t=this.getWritable();return t.__format=typeof e=="string"?we[e]:e,t}setDetail(e){const t=this.getWritable();return t.__detail=typeof e=="string"?Ni[e]:e,t}setStyle(e){const t=this.getWritable();return t.__style=e,t}toggleFormat(e){const t=cn(this.getFormat(),e,null);return this.setFormat(t)}toggleDirectionless(){const e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){const e=this.getWritable();return e.__detail^=2,e}setMode(e){const t=Pi[e];if(this.__mode===t)return this;const r=this.getWritable();return r.__mode=t,r}setTextContent(e){if(this.__text===e)return this;const t=this.getWritable();return t.__text=e,t}select(e,t){Q();let r=e,s=t;const i=A(),o=this.getTextContent(),l=this.__key;if(typeof o=="string"){const a=o.length;r===void 0&&(r=a),s===void 0&&(s=a)}else r=0,s=0;if(!I(i))return Es(l,r,l,s,"text","text");{const a=_e();a!==i.anchor.key&&a!==i.focus.key||J(l),i.setTextNodeRange(this,r,this,s)}return i}selectStart(){return this.select(0,0)}selectEnd(){const e=this.getTextContentSize();return this.select(e,e)}spliceText(e,t,r,s){const i=this.getWritable(),o=i.__text,l=r.length;let a=e;a<0&&(a=l+a,a<0&&(a=0));const c=A();if(s&&I(c)){const h=e+l;c.setTextNodeRange(i,h,i,h)}const f=o.slice(0,a)+r+o.slice(a+t);return i.__text=f,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){Q();const t=this.getLatest(),r=t.getTextContent(),s=t.__key,i=_e(),o=new Set(e),l=[],a=r.length;let c="";for(let T=0;T<a;T++)c!==""&&o.has(T)&&(l.push(c),c=""),c+=r[T];c!==""&&l.push(c);const f=l.length;if(f===0)return[];if(l[0]===r)return[t];const h=l[0],u=t.getParentOrThrow();let d;const g=t.getFormat(),p=t.getStyle(),_=t.__detail;let b=!1;t.isSegmented()?(d=V(h),d.__format=g,d.__style=p,d.__detail=_,b=!0):(d=t.getWritable(),d.__text=h);const m=A(),y=[d];let x=h.length;for(let T=1;T<f;T++){const S=l[T],w=S.length,F=V(S).getWritable();F.__format=g,F.__style=p,F.__detail=_;const O=F.__key,q=x+w;if(I(m)){const D=m.anchor,L=m.focus;D.key===s&&D.type==="text"&&D.offset>x&&D.offset<=q&&(D.key=O,D.offset-=x,m.dirty=!0),L.key===s&&L.type==="text"&&L.offset>x&&L.offset<=q&&(L.key=O,L.offset-=x,m.dirty=!0)}i===s&&J(O),x=q,y.push(F)}(function(T){const S=T.getPreviousSibling(),w=T.getNextSibling();S!==null&&kt(S),w!==null&&kt(w)})(this);const C=u.getWritable(),v=this.getIndexWithinParent();return b?(C.splice(v,0,y),this.remove()):C.splice(v,1,y),I(m)&&Et(m,u,v,f-1),y}mergeWithSibling(e){const t=e===this.getPreviousSibling();t||e===this.getNextSibling()||N(50);const r=this.__key,s=e.__key,i=this.__text,o=i.length;_e()===s&&J(r);const l=A();if(I(l)){const h=l.anchor,u=l.focus;h!==null&&h.key===s&&(Lr(h,t,r,e,o),l.dirty=!0),u!==null&&u.key===s&&(Lr(u,t,r,e,o),l.dirty=!0)}const a=e.__text,c=t?a+i:i+a;this.setTextContent(c);const f=this.getWritable();return e.remove(),f}isTextEntity(){return!1}}function Qi(n){return{forChild:Un(n.style),node:null}}function Xi(n){const e=n,t=e.style.fontWeight==="normal";return{forChild:Un(e.style,t?void 0:"bold"),node:null}}const kr=new WeakMap;function Zi(n){return n.nodeName==="PRE"||n.nodeType===Ye&&n.style!==void 0&&n.style.whiteSpace!==void 0&&n.style.whiteSpace.startsWith("pre")}function Gi(n){const e=n;n.parentElement===null&&N(129);let t=e.textContent||"";if(function(r){let s,i=r.parentNode;const o=[r];for(;i!==null&&(s=kr.get(i))===void 0&&!Zi(i);)o.push(i),i=i.parentNode;const l=s===void 0?i:s;for(let a=0;a<o.length;a++)kr.set(o[a],l);return l}(e)!==null){const r=t.split(/(\r?\n|\t)/),s=[],i=r.length;for(let o=0;o<i;o++){const l=r[o];l===`
`||l===`\r
`?s.push(Ge()):l==="	"?s.push(Jn()):l!==""&&s.push(V(l))}return{node:s}}if(t=t.replace(/\r/g,"").replace(/[ \t\n]+/g," "),t==="")return{node:null};if(t[0]===" "){let r=e,s=!0;for(;r!==null&&(r=br(r,!1))!==null;){const i=r.textContent||"";if(i.length>0){/[ \t\n]$/.test(i)&&(t=t.slice(1)),s=!1;break}}s&&(t=t.slice(1))}if(t[t.length-1]===" "){let r=e,s=!0;for(;r!==null&&(r=br(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(t=t.slice(0,t.length-1))}return t===""?{node:null}:{node:V(t)}}function br(n,e){let t=n;for(;;){let r;for(;(r=e?t.nextSibling:t.previousSibling)===null;){const i=t.parentElement;if(i===null)return null;t=i}if(t=r,t.nodeType===Ye){const i=t.style.display;if(i===""&&!Ji(t)||i!==""&&!i.startsWith("inline"))return null}let s=t;for(;(s=e?t.firstChild:t.lastChild)!==null;)t=s;if(t.nodeType===xe)return t;if(t.nodeName==="BR")return null}}const Yi={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function he(n){const e=Yi[n.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:Un(n.style,e),node:null}}function V(n=""){return zt(new Me(n))}function P(n){return n instanceof Me}function Un(n,e){const t=n.fontWeight,r=n.textDecoration.split(" "),s=t==="700"||t==="bold",i=r.includes("line-through"),o=n.fontStyle==="italic",l=r.includes("underline"),a=n.verticalAlign;return c=>(P(c)&&(s&&!c.hasFormat("bold")&&c.toggleFormat("bold"),i&&!c.hasFormat("strikethrough")&&c.toggleFormat("strikethrough"),o&&!c.hasFormat("italic")&&c.toggleFormat("italic"),l&&!c.hasFormat("underline")&&c.toggleFormat("underline"),a!=="sub"||c.hasFormat("subscript")||c.toggleFormat("subscript"),a!=="super"||c.hasFormat("superscript")||c.toggleFormat("superscript"),e&&!c.hasFormat(e)&&c.toggleFormat(e)),c)}class nt extends Me{static getType(){return"tab"}static clone(e){const t=new nt(e.__key);return t.__text=e.__text,t.__format=e.__format,t.__style=e.__style,t}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}static importJSON(e){const t=Jn();return t.setFormat(e.format),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(e){N(126)}setDetail(e){N(127)}setMode(e){N(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Jn(){return zt(new nt)}function eo(n){return n instanceof nt}class to{constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),r=e.getNode();const s=this.offset,i=e.offset;if(k(t)){const o=t.getDescendantByIndex(s);t=o??t}if(k(r)){const o=r.getDescendantByIndex(i);r=o??r}return t===r?s<i:t.isBefore(r)}getNode(){const e=j(this.key);return e===null&&N(20),e}set(e,t,r){const s=this._selection,i=this.key;this.key=e,this.offset=t,this.type=r,st()||(_e()===i&&J(e),s!==null&&(s.setCachedNodes(null),s.dirty=!0))}}function oe(n,e,t){return new to(n,e,t)}function rn(n,e){let t=e.__key,r=n.offset,s="element";if(P(e)){s="text";const i=e.getTextContentSize();r>i&&(r=i)}else if(!k(e)){const i=e.getNextSibling();if(P(i))t=i.__key,r=0,s="text";else{const o=e.getParent();o&&(t=o.__key,r=e.getIndexWithinParent()+1)}}n.set(t,r,s)}function Tr(n,e){if(k(e)){const t=e.getLastDescendant();k(t)||P(t)?rn(n,t):rn(n,e)}else rn(n,e)}function ge(n,e,t,r){n.key=e,n.offset=t,n.type=r}class Rt{constructor(e){this._cachedNodes=null,this._nodes=e,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){if(!Kt(e))return!1;const t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(s=>r.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new Rt(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(e){}insertText(){}insertNodes(e){const t=this.getNodes(),r=t.length,s=t[r-1];let i;if(P(s))i=s.select();else{const o=s.getIndexWithinParent()+1;i=s.getParentOrThrow().select(o,o)}i.insertNodes(e);for(let o=0;o<r;o++)t[o].remove()}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this._nodes,r=[];for(const s of t){const i=j(s);i!==null&&r.push(i)}return st()||(this._cachedNodes=r),r}getTextContent(){const e=this.getNodes();let t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}}function I(n){return n instanceof ve}class ve{constructor(e,t,r,s){this.anchor=e,this.focus=t,e._selection=this,t._selection=this,this._cachedNodes=null,this.format=r,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(e){this._cachedNodes=e}is(e){return!!I(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const e=this._cachedNodes;if(e!==null)return e;const t=this.anchor,r=this.focus,s=t.isBefore(r),i=s?t:r,o=s?r:t;let l=i.getNode(),a=o.getNode();const c=i.offset,f=o.offset;if(k(l)){const u=l.getDescendantByIndex(c);l=u??l}if(k(a)){let u=a.getDescendantByIndex(f);u!==null&&u!==l&&a.getChildAtIndex(f)===u&&(u=u.getPreviousSibling()),a=u??a}let h;return h=l.is(a)?k(l)&&l.getChildrenSize()>0?[]:[l]:l.getNodesBetween(a),st()||(this._cachedNodes=h),h}setTextNodeRange(e,t,r,s){ge(this.anchor,e.__key,t,"text"),ge(this.focus,r.__key,s,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){const e=this.getNodes();if(e.length===0)return"";const t=e[0],r=e[e.length-1],s=this.anchor,i=this.focus,o=s.isBefore(i),[l,a]=wr(this);let c="",f=!0;for(let h=0;h<e.length;h++){const u=e[h];if(k(u)&&!u.isInline())f||(c+=`
`),f=!u.isEmpty();else if(f=!1,P(u)){let d=u.getTextContent();u===t?u===r?s.type==="element"&&i.type==="element"&&i.offset!==s.offset||(d=l<a?d.slice(l,a):d.slice(a,l)):d=o?d.slice(l):d.slice(a):u===r&&(d=o?d.slice(0,a):d.slice(0,l)),c+=d}else!B(u)&&!Oe(u)||u===r&&this.isCollapsed()||(c+=u.getTextContent())}return c}applyDOMRange(e){const t=M(),r=t.getEditorState()._selection,s=Ns(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r);if(s===null)return;const[i,o]=s;ge(this.anchor,i.key,i.offset,i.type),ge(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}clone(){const e=this.anchor,t=this.focus;return new ve(oe(e.key,e.offset,e.type),oe(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=cn(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){const t=we[e];return!!(this.format&t)}insertRawText(e){const t=e.split(/(\r?\n|\t)/),r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];o===`
`||o===`\r
`?r.push(Ge()):o==="	"?r.push(Jn()):r.push(V(o))}this.insertNodes(r)}insertText(e){const t=this.anchor,r=this.focus,s=this.format,i=this.style;let o=t,l=r;!this.isCollapsed()&&r.isBefore(t)&&(o=r,l=t),o.type==="element"&&function(_,b,m,y){const x=_.getNode(),C=x.getChildAtIndex(_.offset),v=V(),T=G(x)?me().append(v):v;v.setFormat(m),v.setStyle(y),C===null?x.append(T):C.insertBefore(T),_.is(b)&&b.set(v.__key,0,"text"),_.set(v.__key,0,"text")}(o,l,s,i);const a=o.offset;let c=l.offset;const f=this.getNodes(),h=f.length;let u=f[0];P(u)||N(26);const d=u.getTextContent().length,g=u.getParentOrThrow();let p=f[h-1];if(h===1&&l.type==="element"&&(c=d,l.set(o.key,c,"text")),this.isCollapsed()&&a===d&&(u.isSegmented()||u.isToken()||!u.canInsertTextAfter()||!g.canInsertTextAfter()&&u.getNextSibling()===null)){let _=u.getNextSibling();if(P(_)&&_.canInsertTextBefore()&&!Pe(_)||(_=V(),_.setFormat(s),g.canInsertTextAfter()?u.insertAfter(_):g.insertAfter(_)),_.select(0,0),u=_,e!=="")return void this.insertText(e)}else if(this.isCollapsed()&&a===0&&(u.isSegmented()||u.isToken()||!u.canInsertTextBefore()||!g.canInsertTextBefore()&&u.getPreviousSibling()===null)){let _=u.getPreviousSibling();if(P(_)&&!Pe(_)||(_=V(),_.setFormat(s),g.canInsertTextBefore()?u.insertBefore(_):g.insertBefore(_)),_.select(),u=_,e!=="")return void this.insertText(e)}else if(u.isSegmented()&&a!==d){const _=V(u.getTextContent());_.setFormat(s),u.replace(_),u=_}else if(!this.isCollapsed()&&e!==""){const _=p.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||k(_)&&(!_.canInsertTextBefore()||!_.canInsertTextAfter()))return this.insertText(""),ws(this.anchor,this.focus,null),void this.insertText(e)}if(h===1){if(u.isToken()){const y=V(e);return y.select(),void u.replace(y)}const _=u.getFormat(),b=u.getStyle();if(a!==c||_===s&&b===i){if(eo(u)){const y=V(e);return y.setFormat(s),y.setStyle(i),y.select(),void u.replace(y)}}else{if(u.getTextContent()!==""){const y=V(e);if(y.setFormat(s),y.setStyle(i),y.select(),a===0)u.insertBefore(y,!1);else{const[x]=u.splitText(a);x.insertAfter(y,!1)}return void(y.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length))}u.setFormat(s),u.setStyle(i)}const m=c-a;u=u.spliceText(a,m,e,!0),u.getTextContent()===""?u.remove():this.anchor.type==="text"&&(u.isComposing()?this.anchor.offset-=e.length:(this.format=_,this.style=b))}else{const _=new Set([...u.getParentKeys(),...p.getParentKeys()]),b=k(u)?u:u.getParentOrThrow();let m=k(p)?p:p.getParentOrThrow(),y=p;if(!b.is(m)&&m.isInline())do y=m,m=m.getParentOrThrow();while(m.isInline());if(l.type==="text"&&(c!==0||p.getTextContent()==="")||l.type==="element"&&p.getIndexWithinParent()<c)if(P(p)&&!p.isToken()&&c!==p.getTextContentSize()){if(p.isSegmented()){const S=V(p.getTextContent());p.replace(S),p=S}G(l.getNode())||l.type!=="text"||(p=p.spliceText(0,c,"")),_.add(p.__key)}else{const S=p.getParentOrThrow();S.canBeEmpty()||S.getChildrenSize()!==1?p.remove():S.remove()}else _.add(p.__key);const x=m.getChildren(),C=new Set(f),v=b.is(m),T=b.isInline()&&u.getNextSibling()===null?b:u;for(let S=x.length-1;S>=0;S--){const w=x[S];if(w.is(u)||k(w)&&w.isParentOf(u))break;w.isAttached()&&(!C.has(w)||w.is(y)?v||T.insertAfter(w,!1):w.remove())}if(!v){let S=m,w=null;for(;S!==null;){const F=S.getChildren(),O=F.length;(O===0||F[O-1].is(w))&&(_.delete(S.__key),w=S),S=S.getParent()}}if(u.isToken())if(a===d)u.select();else{const S=V(e);S.select(),u.replace(S)}else u=u.spliceText(a,d-a,e,!0),u.getTextContent()===""?u.remove():u.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);for(let S=1;S<h;S++){const w=f[S],F=w.__key;_.has(F)||w.remove()}}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())return this.toggleFormat(e),void J(null);const t=this.getNodes(),r=[];for(const m of t)P(m)&&r.push(m);const s=r.length;if(s===0)return this.toggleFormat(e),void J(null);const i=this.anchor,o=this.focus,l=this.isBackward(),a=l?o:i,c=l?i:o;let f=0,h=r[0],u=a.type==="element"?0:a.offset;if(a.type==="text"&&u===h.getTextContentSize()&&(f=1,h=r[1],u=0),h==null)return;const d=h.getFormatFlags(e,null),g=s-1;let p=r[g];const _=c.type==="text"?c.offset:p.getTextContentSize();if(h.is(p)){if(u===_)return;if(Pe(h)||u===0&&_===h.getTextContentSize())h.setFormat(d);else{const m=h.splitText(u,_),y=u===0?m[0]:m[1];y.setFormat(d),a.type==="text"&&a.set(y.__key,0,"text"),c.type==="text"&&c.set(y.__key,_-u,"text")}return void(this.format=d)}u===0||Pe(h)||([,h]=h.splitText(u),u=0),h.setFormat(d);const b=p.getFormatFlags(e,d);_>0&&(_===p.getTextContentSize()||Pe(p)||([p]=p.splitText(_)),p.setFormat(b));for(let m=f+1;m<g;m++){const y=r[m],x=y.getFormatFlags(e,b);y.setFormat(x)}a.type==="text"&&a.set(h.__key,u,"text"),c.type==="text"&&c.set(p.__key,_,"text"),this.format=d|b}insertNodes(e){if(e.length===0)return;if(this.anchor.key==="root"){this.insertParagraph();const g=A();return I(g)||N(134),g.insertNodes(e)}const t=Gt((this.isBackward()?this.focus:this.anchor).getNode(),Ie),r=e[e.length-1];if("__language"in t&&k(t)){if("__language"in e[0])this.insertText(e[0].getTextContent());else{const g=sn(this);t.splice(g,0,e),r.selectEnd()}return}if(!e.some(g=>(k(g)||B(g))&&!g.isInline())){k(t)||N(135);const g=sn(this);return t.splice(g,0,e),void r.selectEnd()}const s=function(g){const p=me();let _=null;for(let b=0;b<g.length;b++){const m=g[b],y=Oe(m);if(y||B(m)&&m.isInline()||k(m)&&m.isInline()||P(m)||m.isParentRequired()){if(_===null&&(_=m.createParentElementNode(),p.append(_),y))continue;_!==null&&_.append(m)}else p.append(m),_=null}return p}(e),i=s.getLastDescendant(),o=s.getChildren(),l=g=>"__value"in g&&"__checked"in g,a=!k(t)||!t.isEmpty()?this.insertParagraph():null,c=o[o.length-1];let f=o[0];var h;k(h=f)&&Ie(h)&&!h.isEmpty()&&k(t)&&(!t.isEmpty()||l(t))&&(k(t)||N(135),t.append(...f.getChildren()),f=o[1]),f&&function(g,p,_){const b=p.getParentOrThrow().getLastChild();let m=p;const y=[p];for(;m!==b;)m.getNextSibling()||N(140),m=m.getNextSibling(),y.push(m);let x=g;for(const C of y)x=x.insertAfter(C)}(t,f);const u=Gt(i,Ie);a&&k(u)&&(l(a)||Ie(c))&&(u.append(...a.getChildren()),a.remove()),k(t)&&t.isEmpty()&&t.remove(),i.selectEnd();const d=k(t)?t.getLastChild():null;Oe(d)&&u!==t&&d.remove()}insertParagraph(){if(this.anchor.key==="root"){const o=me();return ee().splice(this.anchor.offset,0,[o]),o.select(),o}const e=sn(this),t=Gt(this.anchor.getNode(),Ie);k(t)||N(136);const r=t.getChildAtIndex(e),s=r?[r,...r.getNextSiblings()]:[],i=t.insertNewAfter(this,!1);return i?(i.append(...s),i.selectStart(),i):null}insertLineBreak(e){const t=Ge();if(this.insertNodes([t]),e){const r=t.getParentOrThrow(),s=t.getIndexWithinParent();r.select(s,s)}}extract(){const e=this.getNodes(),t=e.length,r=t-1,s=this.anchor,i=this.focus;let o=e[0],l=e[r];const[a,c]=wr(this);if(t===0)return[];if(t===1){if(P(o)&&!this.isCollapsed()){const h=a>c?c:a,u=a>c?a:c,d=o.splitText(h,u),g=h===0?d[0]:d[1];return g!=null?[g]:[]}return[o]}const f=s.isBefore(i);if(P(o)){const h=f?a:c;h===o.getTextContentSize()?e.shift():h!==0&&([,o]=o.splitText(h),e[0]=o)}if(P(l)){const h=l.getTextContent().length,u=f?c:a;u===0?e.pop():u!==h&&([l]=l.splitText(u),e[r]=l)}return e}modify(e,t,r){const s=this.focus,i=this.anchor,o=e==="move",l=gr(s,t);if(B(l)&&!l.isIsolated()){if(o&&l.isKeyboardSelectable()){const d=Ir();return d.add(l.__key),void ue(d)}const u=t?l.getPreviousSibling():l.getNextSibling();if(P(u)){const d=u.__key,g=t?u.getTextContent().length:0;return s.set(d,g,"text"),void(o&&i.set(d,g,"text"))}{const d=l.getParentOrThrow();let g,p;return k(u)?(p=u.__key,g=t?u.getChildrenSize():0):(g=l.getIndexWithinParent(),p=d.__key,t||g++),s.set(p,g,"element"),void(o&&i.set(p,g,"element"))}}const a=M(),c=ie(a._window);if(!c)return;const f=a._blockCursorElement,h=a._rootElement;if(h===null||f===null||!k(l)||l.isInline()||l.canBeEmpty()||Wn(f,a,h),function(u,d,g,p){u.modify(d,g,p)}(c,e,t?"backward":"forward",r),c.rangeCount>0){const u=c.getRangeAt(0),d=this.anchor.getNode(),g=G(d)?d:Ki(d);if(this.applyDOMRange(u),this.dirty=!0,!o){const p=this.getNodes(),_=[];let b=!1;for(let m=0;m<p.length;m++){const y=p[m];un(y,g)?_.push(y):b=!0}if(b&&_.length>0)if(t){const m=_[0];k(m)?m.selectStart():m.getParentOrThrow().selectStart()}else{const m=_[_.length-1];k(m)?m.selectEnd():m.getParentOrThrow().selectEnd()}c.anchorNode===u.startContainer&&c.anchorOffset===u.startOffset||function(m){const y=m.focus,x=m.anchor,C=x.key,v=x.offset,T=x.type;ge(x,y.key,y.offset,y.type),ge(y,C,v,T),m._cachedNodes=null}(this)}}}forwardDeletion(e,t,r){if(!r&&(e.type==="element"&&k(t)&&e.offset===t.getChildrenSize()||e.type==="text"&&e.offset===t.getTextContentSize())){const s=t.getParent(),i=t.getNextSibling()||(s===null?null:s.getNextSibling());if(k(i)&&i.isShadowRoot())return!0}return!1}deleteCharacter(e){const t=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let s=r.getNode();if(this.forwardDeletion(r,s,e))return;const i=this.focus,o=gr(i,e);if(B(o)&&!o.isIsolated()){if(o.isKeyboardSelectable()&&k(s)&&s.getChildrenSize()===0){s.remove();const l=Ir();l.add(o.__key),ue(l)}else o.remove(),M().dispatchCommand(Sn,void 0);return}if(!e&&k(o)&&k(s)&&s.isEmpty())return s.remove(),void o.selectStart();if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&r.offset===0&&(r.type==="element"?r.getNode():r.getNode().getParentOrThrow()).collapseAtStart(this))return}else{const l=i.type==="text"?i.getNode():null;if(s=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const a=i.offset,c=l.getTextContentSize();if(l.is(s)||e&&a!==c||!e&&a!==0)return void Nr(l,e,a)}else if(s!==null&&s.isSegmented()){const a=r.offset,c=s.getTextContentSize();if(s.is(l)||e&&a!==0||!e&&a!==c)return void Nr(s,e,a)}(function(a,c){const f=a.anchor,h=a.focus,u=f.getNode(),d=h.getNode();if(u===d&&f.type==="text"&&h.type==="text"){const g=f.offset,p=h.offset,_=g<p,b=_?g:p,m=_?p:g,y=m-1;b!==y&&(os(u.getTextContent().slice(b,m))||(c?h.offset=y:f.offset=y))}})(this,e)}}if(this.removeText(),e&&!t&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&G(r.getParent())&&r.getIndexWithinParent()===0&&r.collapseAtStart(this)}}deleteLine(e){if(this.isCollapsed()){const t=this.anchor.type==="element";if(t&&this.insertText(" "),this.modify("extend",e,"lineboundary"),(e?this.focus:this.anchor).offset===0&&this.modify("extend",e,"character"),t){const r=e?this.anchor:this.focus;r.set(r.key,r.offset+1,r.type)}}this.removeText()}deleteWord(e){if(this.isCollapsed()){const t=this.anchor,r=t.getNode();if(this.forwardDeletion(t,r,e))return;this.modify("extend",e,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Kt(n){return n instanceof Rt}function Sr(n){const e=n.offset;if(n.type==="text")return e;const t=n.getNode();return e===t.getChildrenSize()?t.getTextContent().length:0}function wr(n){const e=n.getStartEndPoints();if(e===null)return[0,0];const[t,r]=e;return t.type==="element"&&r.type==="element"&&t.key===r.key&&t.offset===r.offset?[0,0]:[Sr(t),Sr(r)]}function Nr(n,e,t){const r=n,s=r.getTextContent().split(/(?=\s)/g),i=s.length;let o=0,l=0;for(let c=0;c<i;c++){const f=c===i-1;if(l=o,o+=s[c].length,e&&o===t||o>t||f){s.splice(c,1),f&&(l=void 0);break}}const a=s.join("").trim();a===""?r.remove():(r.setTextContent(a),r.select(l,l))}function Er(n,e,t,r){let s,i=e;if(n.nodeType===Ye){let o=!1;const l=n.childNodes,a=l.length,c=r._blockCursorElement;i===a&&(o=!0,i=a-1);let f=l[i],h=!1;if(f===c)f=l[i+1],h=!0;else if(c!==null){const u=c.parentNode;n===u&&e>Array.prototype.indexOf.call(u.children,c)&&i--}if(s=Le(f),P(s))i=ar(s,o);else{let u=Le(n);if(u===null)return null;if(k(u)){i=Math.min(u.getChildrenSize(),i);let d=u.getChildAtIndex(i);if(k(d)&&function(g,p,_){const b=g.getParent();return _===null||b===null||!b.canBeEmpty()||b!==_.getNode()}(d,0,t)){const g=o?d.getLastDescendant():d.getFirstDescendant();g===null?u=d:(d=g,u=k(d)?d:d.getParentOrThrow()),i=0}P(d)?(s=d,u=null,i=ar(d,o)):d!==u&&o&&!h&&i++}else{const d=u.getIndexWithinParent();i=e===0&&B(u)&&Le(n)===u?d:d+1,u=u.getParentOrThrow()}if(k(u))return oe(u.__key,i,"element")}}else s=Le(n);return P(s)?oe(s.__key,i,"text"):null}function Pr(n,e,t){const r=n.offset,s=n.getNode();if(r===0){const i=s.getPreviousSibling(),o=s.getParent();if(e){if((t||!e)&&i===null&&k(o)&&o.isInline()){const l=o.getPreviousSibling();P(l)&&(n.key=l.__key,n.offset=l.getTextContent().length)}}else k(i)&&!t&&i.isInline()?(n.key=i.__key,n.offset=i.getChildrenSize(),n.type="element"):P(i)&&(n.key=i.__key,n.offset=i.getTextContent().length)}else if(r===s.getTextContent().length){const i=s.getNextSibling(),o=s.getParent();if(e&&k(i)&&i.isInline())n.key=i.__key,n.offset=0,n.type="element";else if((t||e)&&i===null&&k(o)&&o.isInline()&&!o.canInsertTextAfter()){const l=o.getNextSibling();P(l)&&(n.key=l.__key,n.offset=0)}}}function ws(n,e,t){if(n.type==="text"&&e.type==="text"){const r=n.isBefore(e),s=n.is(e);Pr(n,r,s),Pr(e,!r,s),s&&(e.key=n.key,e.offset=n.offset,e.type=n.type);const i=M();if(i.isComposing()&&i._compositionKey!==n.key&&I(t)){const o=t.anchor,l=t.focus;ge(n,o.key,o.offset,o.type),ge(e,l.key,l.offset,l.type)}}}function Ns(n,e,t,r,s,i){if(n===null||t===null||!Lt(s,n,t))return null;const o=Er(n,e,I(i)?i.anchor:null,s);if(o===null)return null;const l=Er(t,r,I(i)?i.focus:null,s);if(l===null)return null;if(o.type==="element"&&l.type==="element"){const a=Le(n),c=Le(t);if(B(a)&&B(c))return null}return ws(o,l,i),[o,l]}function Lo(n){return k(n)&&!n.isInline()}function Es(n,e,t,r,s,i){const o=fe(),l=new ve(oe(n,e,s),oe(t,r,i),0,"");return l.dirty=!0,o._selection=l,l}function Do(){const n=oe("root",0,"element"),e=oe("root",0,"element");return new ve(n,e,0,"")}function Ir(){return new Rt(new Set)}function Vn(n,e,t,r){const s=t._window;if(s===null)return null;const i=r||s.event,o=i?i.type:void 0,l=o==="selectionchange",a=!an&&(l||o==="beforeinput"||o==="compositionstart"||o==="compositionend"||o==="click"&&i&&i.detail===3||o==="drop"||o===void 0);let c,f,h,u;if(I(n)&&!a)return n.clone();if(e===null)return null;if(c=e.anchorNode,f=e.focusNode,h=e.anchorOffset,u=e.focusOffset,l&&I(n)&&!Lt(t,c,f))return n.clone();const d=Ns(c,h,f,u,t,n);if(d===null)return null;const[g,p]=d;return new ve(g,p,I(n)?n.format:0,I(n)?n.style:"")}function A(){return fe()._selection}function rt(){return M()._editorState._selection}function Et(n,e,t,r=1){const s=n.anchor,i=n.focus,o=s.getNode(),l=i.getNode();if(!e.is(o)&&!e.is(l))return;const a=e.__key;if(n.isCollapsed()){const c=s.offset;if(t<=c&&r>0||t<c&&r<0){const f=Math.max(0,c+r);s.set(a,f,"element"),i.set(a,f,"element"),Fr(n)}}else{const c=n.isBackward(),f=c?i:s,h=f.getNode(),u=c?s:i,d=u.getNode();if(e.is(h)){const g=f.offset;(t<=g&&r>0||t<g&&r<0)&&f.set(a,Math.max(0,g+r),"element")}if(e.is(d)){const g=u.offset;(t<=g&&r>0||t<g&&r<0)&&u.set(a,Math.max(0,g+r),"element")}}Fr(n)}function Fr(n){const e=n.anchor,t=e.offset,r=n.focus,s=r.offset,i=e.getNode(),o=r.getNode();if(n.isCollapsed()){if(!k(i))return;const l=i.getChildrenSize(),a=t>=l,c=a?i.getChildAtIndex(l-1):i.getChildAtIndex(t);if(P(c)){let f=0;a&&(f=c.getTextContentSize()),e.set(c.__key,f,"text"),r.set(c.__key,f,"text")}}else{if(k(i)){const l=i.getChildrenSize(),a=t>=l,c=a?i.getChildAtIndex(l-1):i.getChildAtIndex(t);if(P(c)){let f=0;a&&(f=c.getTextContentSize()),e.set(c.__key,f,"text")}}if(k(o)){const l=o.getChildrenSize(),a=s>=l,c=a?o.getChildAtIndex(l-1):o.getChildAtIndex(s);if(P(c)){let f=0;a&&(f=c.getTextContentSize()),r.set(c.__key,f,"text")}}}}function Pt(n,e,t,r,s){let i=null,o=0,l=null;r!==null?(i=r.__key,P(r)?(o=r.getTextContentSize(),l="text"):k(r)&&(o=r.getChildrenSize(),l="element")):s!==null&&(i=s.__key,P(s)?l="text":k(s)&&(l="element")),i!==null&&l!==null?n.set(i,o,l):(o=e.getIndexWithinParent(),o===-1&&(o=t.getChildrenSize()),n.set(t.__key,o,"element"))}function Lr(n,e,t,r,s){n.type==="text"?(n.key=t,e||(n.offset+=s)):n.offset>r.getIndexWithinParent()&&(n.offset-=1)}function no(n,e,t,r,s,i,o){const l=r.anchorNode,a=r.focusNode,c=r.anchorOffset,f=r.focusOffset,h=document.activeElement;if(s.has("collaboration")&&h!==i||h!==null&&ts(h))return;if(!I(e))return void(n!==null&&Lt(t,l,a)&&r.removeAllRanges());const u=e.anchor,d=e.focus,g=u.key,p=d.key,_=bt(t,g),b=bt(t,p),m=u.offset,y=d.offset,x=e.format,C=e.style,v=e.isCollapsed();let T=_,S=b,w=!1;if(u.type==="text"){T=Ct(_);const U=u.getNode();w=U.getFormat()!==x||U.getStyle()!==C}else I(n)&&n.anchor.type==="text"&&(w=!0);var F,O,q,D,L;if(d.type==="text"&&(S=Ct(b)),T!==null&&S!==null&&(v&&(n===null||w||I(n)&&(n.format!==x||n.style!==C))&&(F=x,O=C,q=m,D=g,L=performance.now(),xs=[F,O,q,D,L]),c!==m||f!==y||l!==T||a!==S||r.type==="Range"&&v||(h!==null&&i.contains(h)||i.focus({preventScroll:!0}),u.type==="element"))){try{r.setBaseAndExtent(T,m,S,y)}catch{}if(!s.has("skip-scroll-into-view")&&e.isCollapsed()&&i!==null&&i===document.activeElement){const U=e instanceof ve&&e.anchor.type==="element"?T.childNodes[m]||null:r.rangeCount>0?r.getRangeAt(0):null;if(U!==null){let Y;if(U instanceof Text){const Ee=document.createRange();Ee.selectNode(U),Y=Ee.getBoundingClientRect()}else Y=U.getBoundingClientRect();(function(Ee,Be,$n){const qn=$n.ownerDocument,Qn=qn.defaultView;if(Qn===null)return;let{top:Vt,bottom:jt}=Be,ot=0,lt=0,de=$n;for(;de!==null;){const Ht=de===qn.body;if(Ht)ot=0,lt=Mt(Ee).innerHeight;else{const at=de.getBoundingClientRect();ot=at.top,lt=at.bottom}let We=0;if(Vt<ot?We=-(ot-Vt):jt>lt&&(We=jt-lt),We!==0)if(Ht)Qn.scrollBy(0,We);else{const at=de.scrollTop;de.scrollTop+=We;const Xn=de.scrollTop-at;Vt-=Xn,jt-=Xn}if(Ht)break;de=At(de)}})(t,Y,i)}}xn=!0}}function Oo(n){let e=A()||rt();e===null&&(e=ee().selectEnd()),e.insertNodes(n)}function sn(n){let e=n;n.isCollapsed()||e.removeText();const t=A();I(t)&&(e=t),I(e)||N(161);const r=e.anchor;let s=r.getNode(),i=r.offset;for(;!Ie(s);)[s,i]=ro(s,i);return i}function ro(n,e){const t=n.getParent();if(!t){const s=me();return ee().append(s),s.select(),[ee(),0]}if(P(n)){const s=n.splitText(e);if(s.length===0)return[t,n.getIndexWithinParent()];const i=e===0?0:1;return[t,s[0].getIndexWithinParent()+i]}if(!k(n)||e===0)return[t,n.getIndexWithinParent()];const r=n.getChildAtIndex(e);if(r){const s=new ve(oe(n.__key,e,"element"),oe(n.__key,e,"element"),0,""),i=n.insertNewAfter(s);i&&i.append(r,...r.getNextSiblings())}return[t,n.getIndexWithinParent()+1]}let R=null,K=null,X=!1,on=!1,ht=0;const Dr={characterData:!0,childList:!0,subtree:!0};function st(){return X||R!==null&&R._readOnly}function Q(){X&&N(13)}function Ps(){ht>99&&N(14)}function fe(){return R===null&&N(15),R}function M(){return K===null&&N(16),K}function so(){return K}function Or(n,e,t){const r=e.__type,s=function(l,a){const c=l._nodes.get(a);return c===void 0&&N(30,a),c}(n,r);let i=t.get(r);i===void 0&&(i=Array.from(s.transforms),t.set(r,i));const o=i.length;for(let l=0;l<o&&(i[l](e),e.isAttached());l++);}function Ar(n,e){return n!==void 0&&n.__key!==e&&n.isAttached()}function Ao(n){return jn(n,M()._nodes)}function jn(n,e){const t=n.type,r=e.get(t);r===void 0&&N(17,t);const s=r.klass;n.type!==s.getType()&&N(18,s.name);const i=s.importJSON(n),o=n.children;if(k(i)&&Array.isArray(o))for(let l=0;l<o.length;l++){const a=jn(o[l],e);i.append(a)}return i}function Mr(n,e){const t=R,r=X,s=K;R=n,X=!0,K=null;try{return e()}finally{R=t,X=r,K=s}}function Te(n,e){const t=n._pendingEditorState,r=n._rootElement,s=n._headless||r===null;if(t===null)return;const i=n._editorState,o=i._selection,l=t._selection,a=n._dirtyType!==Se,c=R,f=X,h=K,u=n._updating,d=n._observer;let g=null;if(n._pendingEditorState=null,n._editorState=t,!s&&a&&d!==null){K=n,R=t,X=!1,n._updating=!0;try{const v=n._dirtyType,T=n._dirtyElements,S=n._dirtyLeaves;d.disconnect(),g=Hi(i,t,n,v,T,S)}catch(v){if(v instanceof Error&&n._onError(v),on)throw v;return Os(n,null,r,t),es(n),n._dirtyType=Ae,on=!0,Te(n,i),void(on=!1)}finally{d.observe(r,Dr),n._updating=u,R=c,X=f,K=h}}t._readOnly||(t._readOnly=!0);const p=n._dirtyLeaves,_=n._dirtyElements,b=n._normalizedNodes,m=n._updateTags,y=n._deferred;a&&(n._dirtyType=Se,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements=new Map,n._normalizedNodes=new Set,n._updateTags=new Set),function(v,T){const S=v._decorators;let w=v._pendingDecorators||S;const F=T._nodeMap;let O;for(O in w)F.has(O)||(w===S&&(w=ss(v)),delete w[O])}(n,t);const x=s?null:ie(n._window);if(n._editable&&x!==null&&(a||l===null||l.dirty)){K=n,R=t;try{if(d!==null&&d.disconnect(),a||l===null||l.dirty){const v=n._blockCursorElement;v!==null&&Wn(v,n,r),no(o,l,n,x,m,r)}Ui(n,r,l),d!==null&&d.observe(r,Dr)}finally{K=h,R=c}}g!==null&&function(v,T,S,w,F){const O=Array.from(v._listeners.mutation),q=O.length;for(let D=0;D<q;D++){const[L,U]=O[D],Y=T.get(U);Y!==void 0&&L(Y,{dirtyLeaves:w,prevEditorState:F,updateTags:S})}}(n,g,m,p,i),I(l)||l===null||o!==null&&o.is(l)||n.dispatchCommand(Sn,void 0);const C=n._pendingDecorators;C!==null&&(n._decorators=C,n._pendingDecorators=null,Qe("decorator",n,!0,C)),function(v,T,S){const w=lr(T),F=lr(S);w!==F&&Qe("textcontent",v,!0,F)}(n,e||i,t),Qe("update",n,!0,{dirtyElements:_,dirtyLeaves:p,editorState:t,normalizedNodes:b,prevEditorState:e||i,tags:m}),function(v,T){if(v._deferred=[],T.length!==0){const S=v._updating;v._updating=!0;try{for(let w=0;w<T.length;w++)T[w]()}finally{v._updating=S}}}(n,y),function(v){const T=v._updates;if(T.length!==0){const S=T.shift();if(S){const[w,F]=S;Fs(v,w,F)}}}(n)}function Qe(n,e,t,...r){const s=e._updating;e._updating=t;try{const i=Array.from(e._listeners[n]);for(let o=0;o<i.length;o++)i[o].apply(null,r)}finally{e._updating=s}}function Is(n,e,t){if(n._updating===!1||K!==n){let s=!1;return n.update(()=>{s=Is(n,e,t)}),s}const r=An(n);for(let s=4;s>=0;s--)for(let i=0;i<r.length;i++){const o=r[i]._commands.get(e);if(o!==void 0){const l=o[s];if(l!==void 0){const a=Array.from(l),c=a.length;for(let f=0;f<c;f++)if(a[f](t,n)===!0)return!0}}}return!1}function zr(n,e){const t=n._updates;let r=e||!1;for(;t.length!==0;){const s=t.shift();if(s){const[i,o]=s;let l,a;o!==void 0&&(l=o.onUpdate,a=o.tag,o.skipTransforms&&(r=!0),l&&n._deferred.push(l),a&&n._updateTags.add(a)),i()}}return r}function Fs(n,e,t){const r=n._updateTags;let s,i,o=!1,l=!1;t!==void 0&&(s=t.onUpdate,i=t.tag,i!=null&&r.add(i),o=t.skipTransforms||!1,l=t.discrete||!1),s&&n._deferred.push(s);const a=n._editorState;let c=n._pendingEditorState,f=!1;(c===null||c._readOnly)&&(c=n._pendingEditorState=new Jt(new Map((c||a)._nodeMap)),f=!0),c._flushSync=l;const h=R,u=X,d=K,g=n._updating;R=c,X=!1,n._updating=!0,K=n;try{f&&(n._headless?a._selection!==null&&(c._selection=a._selection.clone()):c._selection=function(m){const y=m.getEditorState()._selection,x=ie(m._window);return I(y)||y==null?Vn(y,x,m,null):y.clone()}(n));const _=n._compositionKey;e(),o=zr(n,o),function(m,y){const x=y.getEditorState()._selection,C=m._selection;if(I(C)){const v=C.anchor,T=C.focus;let S;if(v.type==="text"&&(S=v.getNode(),S.selectionTransform(x,C)),T.type==="text"){const w=T.getNode();S!==w&&w.selectionTransform(x,C)}}}(c,n),n._dirtyType!==Se&&(o?function(m,y){const x=y._dirtyLeaves,C=m._nodeMap;for(const v of x){const T=C.get(v);P(T)&&T.isAttached()&&T.isSimpleText()&&!T.isUnmergeable()&&ir(T)}}(c,n):function(m,y){const x=y._dirtyLeaves,C=y._dirtyElements,v=m._nodeMap,T=_e(),S=new Map;let w=x,F=w.size,O=C,q=O.size;for(;F>0||q>0;){if(F>0){y._dirtyLeaves=new Set;for(const D of w){const L=v.get(D);P(L)&&L.isAttached()&&L.isSimpleText()&&!L.isUnmergeable()&&ir(L),L!==void 0&&Ar(L,T)&&Or(y,L,S),x.add(D)}if(w=y._dirtyLeaves,F=w.size,F>0){ht++;continue}}y._dirtyLeaves=new Set,y._dirtyElements=new Map;for(const D of O){const L=D[0],U=D[1];if(L!=="root"&&!U)continue;const Y=v.get(L);Y!==void 0&&Ar(Y,T)&&Or(y,Y,S),C.set(L,U)}w=y._dirtyLeaves,F=w.size,O=y._dirtyElements,q=O.size,ht++}y._dirtyLeaves=x,y._dirtyElements=C}(c,n),zr(n),function(m,y,x,C){const v=m._nodeMap,T=y._nodeMap,S=[];for(const[w]of C){const F=T.get(w);F!==void 0&&(F.isAttached()||(k(F)&&us(F,w,v,T,S,C),v.has(w)||C.delete(w),S.push(w)))}for(const w of S)T.delete(w);for(const w of x){const F=T.get(w);F===void 0||F.isAttached()||(v.has(w)||x.delete(w),T.delete(w))}}(a,c,n._dirtyLeaves,n._dirtyElements)),_!==n._compositionKey&&(c._flushSync=!0);const b=c._selection;if(I(b)){const m=c._nodeMap,y=b.anchor.key,x=b.focus.key;m.get(y)!==void 0&&m.get(x)!==void 0||N(19)}else Kt(b)&&b._nodes.size===0&&(c._selection=null)}catch(_){return _ instanceof Error&&n._onError(_),n._pendingEditorState=a,n._dirtyType=Ae,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),void Te(n)}finally{R=h,X=u,K=d,n._updating=g,ht=0}n._dirtyType!==Se||function(_,b){const m=b.getEditorState()._selection,y=_._selection;if(y!==null){if(y.dirty||!y.is(m))return!0}else if(m!==null)return!0;return!1}(c,n)?c._flushSync?(c._flushSync=!1,Te(n)):f&&zi(()=>{Te(n)}):(c._flushSync=!1,f&&(r.clear(),n._deferred=[],n._pendingEditorState=null))}function Z(n,e,t){n._updating?n._updates.push([e,t]):Fs(n,e,t)}class Ut extends Wt{constructor(e){super(e),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__indent=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){const e=this.getFormat();return Ei[e]||""}getIndent(){return this.getLatest().__indent}getChildren(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){const e=[];let t=this.getFirstChild();for(;t!==null;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const e=M()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){const e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return t!==null&&t.is(e)}getAllTextNodes(){const e=[];let t=this.getFirstChild();for(;t!==null;){if(P(t)&&e.push(t),k(t)){const r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;k(e);){const t=e.getFirstChild();if(t===null)break;e=t}return e}getLastDescendant(){let e=this.getLastChild();for(;k(e);){const t=e.getLastChild();if(t===null)break;e=t}return e}getDescendantByIndex(e){const t=this.getChildren(),r=t.length;if(e>=r){const i=t[r-1];return k(i)&&i.getLastDescendant()||i||null}const s=t[e];return k(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const e=this.getLatest().__first;return e===null?null:j(e)}getFirstChildOrThrow(){const e=this.getFirstChild();return e===null&&N(45,this.__key),e}getLastChild(){const e=this.getLatest().__last;return e===null?null:j(e)}getLastChildOrThrow(){const e=this.getLastChild();return e===null&&N(96,this.__key),e}getChildAtIndex(e){const t=this.getChildrenSize();let r,s;if(e<t/2){for(r=this.getFirstChild(),s=0;r!==null&&s<=e;){if(s===e)return r;r=r.getNextSibling(),s++}return null}for(r=this.getLastChild(),s=t-1;r!==null&&s>=e;){if(s===e)return r;r=r.getPreviousSibling(),s--}return null}getTextContent(){let e="";const t=this.getChildren(),r=t.length;for(let s=0;s<r;s++){const i=t[s];e+=i.getTextContent(),k(i)&&s!==r-1&&!i.isInline()&&(e+=ce)}return e}getTextContentSize(){let e=0;const t=this.getChildren(),r=t.length;for(let s=0;s<r;s++){const i=t[s];e+=i.getTextContentSize(),k(i)&&s!==r-1&&!i.isInline()&&(e+=ce.length)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){if(e!==""){const t=nr[e];return!!(this.getFormat()&t)}return!1}select(e,t){Q();const r=A();let s=e,i=t;const o=this.getChildrenSize();if(!this.canBeEmpty()){if(e===0&&t===0){const a=this.getFirstChild();if(P(a)||k(a))return a.select(0,0)}else if(!(e!==void 0&&e!==o||t!==void 0&&t!==o)){const a=this.getLastChild();if(P(a)||k(a))return a.select()}}s===void 0&&(s=o),i===void 0&&(i=o);const l=this.__key;return I(r)?(r.anchor.set(l,s,"element"),r.focus.set(l,i,"element"),r.dirty=!0,r):Es(l,s,l,i,"element","element")}selectStart(){const e=this.getFirstDescendant();return e?e.selectStart():this.select()}selectEnd(){const e=this.getLastDescendant();return e?e.selectEnd():this.select()}clear(){const e=this.getWritable();return this.getChildren().forEach(t=>t.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){const t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=e!==""?nr[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){const s=r.length,i=this.getChildrenSize(),o=this.getWritable(),l=o.__key,a=[],c=[],f=this.getChildAtIndex(e+t);let h=null,u=i-t+s;if(e!==0)if(e===i)h=this.getLastChild();else{const g=this.getChildAtIndex(e);g!==null&&(h=g.getPreviousSibling())}if(t>0){let g=h===null?this.getFirstChild():h.getNextSibling();for(let p=0;p<t;p++){g===null&&N(100);const _=g.getNextSibling(),b=g.__key;be(g.getWritable()),c.push(b),g=_}}let d=h;for(let g=0;g<s;g++){const p=r[g];d!==null&&p.is(d)&&(h=d=d.getPreviousSibling());const _=p.getWritable();_.__parent===l&&u--,be(_);const b=p.__key;if(d===null)o.__first=b,_.__prev=null;else{const m=d.getWritable();m.__next=b,_.__prev=m.__key}p.__key===l&&N(76),_.__parent=l,a.push(b),d=p}if(e+t===i)d!==null&&(d.getWritable().__next=null,o.__last=d.__key);else if(f!==null){const g=f.getWritable();if(d!==null){const p=d.getWritable();g.__prev=d.__key,p.__next=f.__key}else g.__prev=null}if(o.__size=u,c.length){const g=A();if(I(g)){const p=new Set(c),_=new Set(a),{anchor:b,focus:m}=g;Br(b,p,_)&&Pt(b,b.getNode(),this,h,f),Br(m,p,_)&&Pt(m,m.getNode(),this,h,f),u!==0||this.canBeEmpty()||et(this)||this.remove()}}return o}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(e,t){return null}canIndent(){return!0}collapseAtStart(e){return!1}excludeFromCopy(e){return!1}canReplaceWith(e){return!0}canInsertAfter(e){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(e){return!1}extractWithChild(e,t,r){return!1}}function k(n){return n instanceof Ut}function Br(n,e,t){let r=n.getNode();for(;r;){const s=r.__key;if(e.has(s)&&!t.has(s))return!0;r=r.getParent()}return!1}class Ls extends Wt{constructor(e){super(e)}decorate(e,t){N(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function B(n){return n instanceof Ls}class it extends Ut{static getType(){return"root"}static clone(){return new it}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){N(51)}getTextContent(){const e=this.__cachedText;return!st()&&M()._dirtyType!==Se||e===null?super.getTextContent():e}remove(){N(52)}replace(e){N(53)}insertBefore(e){N(54)}insertAfter(e){N(55)}updateDOM(e,t){return!1}append(...e){for(let t=0;t<e.length;t++){const r=e[t];k(r)||B(r)||N(56)}return super.append(...e)}static importJSON(e){const t=ee();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function G(n){return n instanceof it}function Hn(){return new Jt(new Map([["root",new it]]))}function Ds(n){const e=n.exportJSON(),t=n.constructor;if(e.type!==t.getType()&&N(130,t.name),k(n)){const r=e.children;Array.isArray(r)||N(59,t.name);const s=n.getChildren();for(let i=0;i<s.length;i++){const o=Ds(s[i]);r.push(o)}}return e}class Jt{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e){return Mr(this,e)}clone(e){const t=new Jt(this._nodeMap,e===void 0?this._selection:e);return t._readOnly=!0,t}toJSON(){return Mr(this,()=>({root:Ds(ee())}))}}class io extends Ut{static getType(){return"artificial"}createDOM(e){return document.createElement("div")}}class ze extends Ut{constructor(e){super(e),this.__textFormat=0}static getType(){return"paragraph"}getTextFormat(){return this.getLatest().__textFormat}setTextFormat(e){const t=this.getWritable();return t.__textFormat=e,t}hasTextFormat(e){const t=we[e];return!!(this.getTextFormat()&t)}static clone(e){return new ze(e.__key)}createDOM(e){const t=document.createElement("p"),r=He(e.theme,"paragraph");return r!==void 0&&t.classList.add(...r),t}updateDOM(e,t,r){return!1}static importDOM(){return{p:e=>({conversion:oo,priority:0})}}exportDOM(e){const{element:t}=super.exportDOM(e);if(t&&Rn(t)){this.isEmpty()&&t.append(document.createElement("br"));const r=this.getFormatType();t.style.textAlign=r;const s=this.getDirection();s&&(t.dir=s);const i=this.getIndent();i>0&&(t.style.textIndent=20*i+"px")}return{element:t}}static importJSON(e){const t=me();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t.setTextFormat(e.textFormat),t}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),type:"paragraph",version:1}}insertNewAfter(e,t){const r=me();r.setTextFormat(e.format);const s=this.getDirection();return r.setDirection(s),r.setFormat(this.getFormatType()),this.insertAfter(r,t),r}collapseAtStart(){const e=this.getChildren();if(e.length===0||P(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function oo(n){const e=me();if(n.style){e.setFormat(n.style.textAlign);const t=parseInt(n.style.textIndent,10)/20;t>0&&e.setIndent(t)}return{node:e}}function me(){return zt(new ze)}function kn(n){return n instanceof ze}const Mo=0,zo=1,lo=2,Bo=3,Wo=4;function Os(n,e,t,r){const s=n._keyToDOMMap;s.clear(),n._editorState=Hn(),n._pendingEditorState=r,n._compositionKey=null,n._dirtyType=Se,n._cloneNotNeeded.clear(),n._dirtyLeaves=new Set,n._dirtyElements.clear(),n._normalizedNodes=new Set,n._updateTags=new Set,n._updates=[],n._blockCursorElement=null;const i=n._observer;i!==null&&(i.disconnect(),n._observer=null),e!==null&&(e.textContent=""),t!==null&&(t.textContent="",s.set("root",t))}function Ro(n){const e=n||{},t=so(),r=e.theme||{},s=n===void 0?t:e.parentEditor||null,i=e.disableEvents||!1,o=Hn(),l=e.namespace||(s!==null?s._config.namespace:ls()),a=e.editorState,c=[it,Me,tt,nt,ze,io,...e.nodes||[]],{onError:f,html:h}=e,u=e.editable===void 0||e.editable;let d;if(n===void 0&&t!==null)d=t._nodes;else{d=new Map;for(let p=0;p<c.length;p++){let _=c[p],b=null,m=null;if(typeof _!="function"){const v=_;_=v.replace,b=v.with,m=v.withKlass||null}const y=_.getType(),x=_.transform(),C=new Set;x!==null&&C.add(x),d.set(y,{exportDOM:h&&h.export?h.export.get(_):void 0,klass:_,replace:b,replaceWithKlass:m,transforms:C})}}const g=new ao(o,s,d,{disableEvents:i,namespace:l,theme:r},f||console.error,function(p,_){const b=new Map,m=new Set,y=x=>{Object.keys(x).forEach(C=>{let v=b.get(C);v===void 0&&(v=[],b.set(C,v)),v.push(x[C])})};return p.forEach(x=>{const C=x.klass.importDOM;if(C==null||m.has(C))return;m.add(C);const v=C.call(x.klass);v!==null&&y(v)}),_&&y(_),b}(d,h?h.import:void 0),u);return a!==void 0&&(g._pendingEditorState=a,g._dirtyType=Ae),g}class ao{constructor(e,t,r,s,i,o,l){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=Se,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=ls(),this._onError=i,this._htmlConversions=o,this._editable=l,this._headless=t!==null&&t._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){const t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){const t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){const t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){const t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){const t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){r===void 0&&N(35);const s=this._commands;s.has(e)||s.set(e,[new Set,new Set,new Set,new Set,new Set]);const i=s.get(e);i===void 0&&N(36,String(e));const o=i[r];return o.add(t),()=>{o.delete(t),i.every(l=>l.size===0)&&s.delete(e)}}registerMutationListener(e,t){let r=this._nodes.get(e.getType());r===void 0&&N(37,e.name);let s=e,i=null;for(;i=r.replaceWithKlass;)s=i,r=this._nodes.get(i.getType()),r===void 0&&N(37,i.name);const o=this._listeners.mutation;return o.set(t,s),()=>{o.delete(t)}}registerNodeTransformToKlass(e,t){const r=e.getType(),s=this._nodes.get(r);return s===void 0&&N(37,e.name),s.transforms.add(t),s}registerNodeTransform(e,t){const r=this.registerNodeTransformToKlass(e,t),s=[r],i=r.replaceWithKlass;if(i!=null){const a=this.registerNodeTransformToKlass(i,t);s.push(a)}var o,l;return o=this,l=e.getType(),Z(o,()=>{const a=fe();if(a.isEmpty())return;if(l==="root")return void ee().markDirty();const c=a._nodeMap;for(const[,f]of c)f.markDirty()},o._pendingEditorState===null?{tag:"history-merge"}:void 0),()=>{s.forEach(a=>a.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return E(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){const t=this._rootElement;if(e!==t){const r=He(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=e,Os(this,t,e,s),t!==null&&(this._config.disableEvents||$i(t),r!=null&&t.classList.remove(...r)),e!==null){const i=function(l){const a=l.ownerDocument;return a&&a.defaultView||null}(e),o=e.style;o.userSelect="text",o.whiteSpace="pre-wrap",o.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=i,this._dirtyType=Ae,es(this),this._updateTags.add("history-merge"),Te(this),this._config.disableEvents||function(l,a){const c=l.ownerDocument,f=Nt.get(c);(f===void 0||f<1)&&c.addEventListener("selectionchange",bs),Nt.set(c,(f||0)+1),l.__lexicalEditor=a;const h=ks(l);for(let u=0;u<yn.length;u++){const[d,g]=yn[u],p=typeof g=="function"?_=>{xr(_)||(yr(_),(a.isEditable()||d==="click")&&g(_,a))}:_=>{if(xr(_))return;yr(_);const b=a.isEditable();switch(d){case"cut":return b&&E(a,$r,_);case"copy":return E(a,Hr,_);case"paste":return b&&E(a,Jr,_);case"dragstart":return b&&E(a,ui,_);case"dragover":return b&&E(a,fi,_);case"dragend":return b&&E(a,di,_);case"focus":return b&&E(a,hi,_);case"blur":return b&&E(a,gi,_);case"drop":return b&&E(a,ci,_)}};l.addEventListener(d,p),h.push(()=>{l.removeEventListener(d,p)})}}(e,this),r!=null&&e.classList.add(...r)}else this._editorState=s,this._pendingEditorState=null,this._window=null;Qe("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&N(38),Yr(this);const r=this._pendingEditorState,s=this._updateTags,i=t!==void 0?t.tag:null;r===null||r.isEmpty()||(i!=null&&s.add(i),Te(this)),this._pendingEditorState=e,this._dirtyType=Ae,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&s.add(i),Te(this)}parseEditorState(e,t){return function(r,s,i){const o=Hn(),l=R,a=X,c=K,f=s._dirtyElements,h=s._dirtyLeaves,u=s._cloneNotNeeded,d=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,R=o,X=!1,K=s;try{const g=s._nodes;jn(r.root,g),i&&i(),o._readOnly=!0}catch(g){g instanceof Error&&s._onError(g)}finally{s._dirtyElements=f,s._dirtyLeaves=h,s._cloneNotNeeded=u,s._dirtyType=d,R=l,X=a,K=c}return o}(typeof e=="string"?JSON.parse(e):e,this,t)}update(e,t){Z(this,e,t)}focus(e,t={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),Z(this,()=>{const s=A(),i=ee();s!==null?s.dirty=!0:i.getChildrenSize()!==0&&(t.defaultSelection==="rootStart"?i.selectStart():i.selectEnd())},{onUpdate:()=>{r.removeAttribute("autocapitalize"),e&&e()},tag:"focus"}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const e=this._rootElement;e!==null&&e.blur();const t=ie(this._window);t!==null&&t.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,Qe("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}class bn extends Ls{constructor(e,t,r){super(r),this._iconPath=e,this._styles=t}static getType(){return"inline-icon"}static clone(e){return new bn(e._iconPath,e._styles,e.getKey())}createDOM(){const e=document.createElement("span");return e.className="selected-icon",e.style.fontSize="inherit",e.style.color="inherit",e}updateDOM(){return!1}decorate(){return z(co,{iconName:this._iconPath,styles:this._styles})}exportJSON(){return{type:"inline-icon",version:1,iconName:this._iconPath,styles:this._styles}}static importJSON(e){return new bn(e.iconName,e.styles)}}const co=({iconName:n,styles:e})=>z(Kr,{icon:n,style:e,className:"btn-icon-item"}),Wr=Qs(),Rr=({placeholder:n,editor:e,onIconSelection:t,isIconSelected:r})=>{const[s,i]=$t.useState(""),[o,l]=$t.useState("TRUECHART"),a=x=>{const C=x.target.value;i(C)},c=()=>{i("")},f=qt.useMemo(()=>Object.keys(Rs).sort().filter(x=>x.toLowerCase().includes(s.toLowerCase())),[s]),h=qt.useMemo(()=>Object.keys(Ks).sort().filter(x=>x.toLowerCase().includes(s.toLowerCase())),[s]),u=qt.useMemo(()=>Object.keys(Us).sort().filter(x=>x.toLowerCase().includes(s.toLowerCase())),[s]);let d=[];switch(o){case"TRUECHART":d=f;break;case"FontAwesome":d=h;break;case"Leonardo UI":d=u;break}const g=x=>`height: auto; width: ${Number(x.replace("px",""))*1.2}px;`;function p(x){return x.split(";").map(C=>C.trim()).filter(C=>C).reduce((C,v)=>{const[T,S]=v.split(":").map(F=>F.trim());if(!T||!S)return C;const w=T.replace(/-([a-z])/g,(F,O)=>O.toUpperCase());return C[w]=S,C},{})}const _=(x,C)=>{let v=x;return C==="TRUECHART"&&(v=x.split(";").map(S=>{const[w,F]=S.split(":");return w==="font-size"?g(F):S+";"}).join("")),p(v)},b=()=>{t&&t()};$t.useEffect(()=>e.registerCommand(Wr,x=>(e.update(()=>{const C=A();if(I(C)){const v=C;v.anchor.offset=0,v.focus.offset=0;const T=_(v.style,o);t&&t({style:T,name:x})}}),!0),lo),[e,o]);const m=x=>{e.dispatchCommand(Wr,x),i("")},y=(x,C)=>{C.length===1&&x.key==="Enter"&&m(C[0])};return ct(uo,{children:[ct("div",{className:"search-iconfilters-container",children:[z(Gn,{title:r?"Remove the existing icon before adding a new one":"",disableHoverListener:!r,disableFocusListener:!r,placement:"top-start",PopperProps:{sx:{zIndex:150001,marginLeft:"-15px !important",marginBottom:"-9px !important"}},arrow:!0,children:ct("div",{className:`search-field-container ${r?"disabled":""}`,children:[z("input",{type:"text",className:"search-field-input",placeholder:n,value:s,onKeyUp:x=>y(x,d),onChange:a,disabled:r}),z("button",{type:"button",className:"search-field-icon",onClick:c,"aria-label":"Clear search field",disabled:r,children:s?z(Zn,{}):z(Ur,{})})]})}),z("div",{className:"icon-filters",children:r?z(Gn,{title:"Remove Icon",disableHoverListener:!r,disableFocusListener:!r,PopperProps:{sx:{zIndex:150001,marginLeft:"-3px !important",marginBottom:"-5px !important",maxWidth:"70px !important","& .MuiTooltip-tooltip":{padding:"4px !important"}}},placement:"top-start",arrow:!0,children:z("button",{className:"bar-icon-item remove-icon",onClick:b,children:z(Zn,{})})}):ct(As,{children:[z("button",{className:`truechat-icons bar-icon-item ${o==="TRUECHART"?"active":""}`,onClick:()=>l("TRUECHART"),children:z("img",{src:Hs,alt:"TC Icon"})}),z("button",{className:`fontawesome-icons bar-icon-item ${o==="FontAwesome"?"active":""}`,onClick:()=>l("FontAwesome"),children:z("img",{src:$s,alt:"Fa Icon"})}),z("button",{className:`leornado-icons bar-icon-item ${o==="Leonardo UI"?"active":""}`,onClick:()=>l("Leonardo UI"),children:z("img",{src:qs,alt:"Lui Icon"})})]})})]}),d.length>0&&s.trim().length>0&&z("div",{className:"icon-results",children:d.map((x,C)=>z("button",{onClick:()=>m(x),className:"icon-item",children:z(Kr,{icon:x,className:"btn-icon-item"})},`icon-${C}`))})]})},uo=zs("div")`
    display: flex;
    align-items: center;
    flex: 1;
    position: relative;
    max-width: 537px;
    
    .search-iconfilters-container {
        display: flex;
        align-items: center;
    }

    .search-field-container {
        display: flex;
        flex: 1;
        position: relative;
        border: 2px solid #000;
        border-radius: 5px;
        max-height: 25px;

        &.disabled{
            border-color: #e3e3e3;
        }

        .search-field-input {
            box-sizing: border-box;
            border: none;
            font-weight: 400;
            font-size: 13px;
            color: #777;
            width: 100%;
            height: 100%;
            outline: none;
            
            &:disabled{
                background: #f6f2f2;
                color: #f6f2f2;
                cursor: not-allowed;
            }
        }

        .search-field-icon {
            background: #fff;
            border: none;
            width: 18px;
            height: 100%;
            position: absolute;
            right: 0;
            padding: 0;
            display: flex;
            align-items: center;
            cursor: pointer;
            
            &:disabled{
                background: #f6f2f2;
                cursor: not-allowed;
            }

            svg {
                width: 15px;
                height: 15px;
            }
        }
    }

    .icon-filters {
        display: flex;
        align-items: center;
        margin-left: 2px;
        column-gap: 2px;

        .bar-icon-item {
            border: none;
            background: #fff;
            height: 22px;
            width: 23px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            
            &.active{
                background: #d5d5d5;
                border-radius: 6px;
            }
            
            &:hover{
                background: #eeeeee;
                border-radius: 6px;
            }
            

            img{
                height: 20px;
            }
        }
        
        }
    }

.icon-results{
    position: absolute;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(4, auto);
    justify-content: center;
    width: 133px;
    height: 116px;
    margin-left: 2px;
    background: #fff;
    box-shadow: 1px 1px 1px #ddd;
    left: 0;
    top: 0;
    translate: 0 38px;
    gap: 7px;
    overflow: auto;
    padding: 7px 2px 5px 8px;;
    
    .icon-item{
        display: inline-flex;
        height: 20px;
        width: 25px;
        justify-content: center;
        align-items: center;
        border: none;
        background: transparent;
        padding:0;
        
        .btn-icon-item{
            cursor:pointer
        }
        
        i{
            font-size: 18px;
        }
    }
`;try{Rr.displayName="HCIconSearchField",Rr.__docgenInfo={description:"",displayName:"HCIconSearchField",props:{placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},editor:{defaultValue:null,description:"",name:"editor",required:!0,type:{name:"LexicalEditor"}},onIconSelection:{defaultValue:null,description:"",name:"onIconSelection",required:!1,type:{name:"((selectedIcon?: CellIconProps) => void)"}},isIconSelected:{defaultValue:null,description:"",name:"isIconSelected",required:!1,type:{name:"boolean"}}}}}catch{}export{P as $,Mo as A,$r as B,Kt as C,Po as D,Dt as E,ci as F,k as G,Rr as H,ui as I,Do as J,gr as K,fi as L,Hr as M,Oe as N,oi as O,ln as P,Ai as Q,ft as R,Yn as S,li as T,Ao as U,V,tr as W,gt as X,ii as Y,Ut as Z,ko as _,I as a,Gs as a0,ei as a1,ri as a2,ni as a3,Co as a4,vo as a5,Oo as a6,bo as a7,ke as a8,er as a9,je as aa,pt as ab,_t as ac,Xs as ad,To as ae,Io as af,zo as ag,Eo as ah,wo as ai,No as aj,So as ak,jr as al,Vr as am,st as an,Ls as ao,Sn as ap,_i as aq,lo as ar,eo as as,Me as at,Ir as au,Bo as av,it as aw,bn as ax,j as b,rt as c,kn as d,et as e,me as f,ue as g,io as h,Lo as i,Fo as j,Wo as k,xo as l,A as m,B as n,wr as o,zt as p,Jn as q,Jr as r,G as s,Lt as t,Rn as u,Qs as v,Ge as w,Ro as x,ee as y,ts as z};
